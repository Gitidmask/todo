DEBUG [2017-09-08 09:18:53,043][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-08 09:18:53,871][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3}] 
INFO  [2017-09-08 09:18:54,127][] com.liuqi.tool.todo.ui.Main:69 - Get saved user info succeeded, username: 刘奇 
DEBUG [2017-09-08 09:18:54,603][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170903, send json:  
DEBUG [2017-09-08 09:18:54,640][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:18:54,669][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170904, send json:  
DEBUG [2017-09-08 09:18:54,679][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:18:54,686][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170905, send json:  
DEBUG [2017-09-08 09:18:54,699][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:18:54,707][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170906, send json:  
DEBUG [2017-09-08 09:18:54,720][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:18:54,728][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170907, send json:  
DEBUG [2017-09-08 09:18:54,742][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:18:54,750][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170908, send json:  
DEBUG [2017-09-08 09:18:54,770][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":1,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123123","parent":null,"children":[]},{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]}] 
DEBUG [2017-09-08 09:18:54,778][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170909, send json:  
DEBUG [2017-09-08 09:18:54,789][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:18:54,797][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170903, send json:  
DEBUG [2017-09-08 09:18:54,808][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:18:54,815][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170904, send json:  
DEBUG [2017-09-08 09:18:54,822][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:18:54,826][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170905, send json:  
DEBUG [2017-09-08 09:18:54,835][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:18:54,839][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170906, send json:  
DEBUG [2017-09-08 09:18:54,849][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:18:54,855][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170907, send json:  
DEBUG [2017-09-08 09:18:54,865][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:18:54,869][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170908, send json:  
DEBUG [2017-09-08 09:18:54,884][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":1,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123123","parent":null,"children":[]},{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]}] 
DEBUG [2017-09-08 09:18:54,890][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170909, send json:  
DEBUG [2017-09-08 09:18:54,900][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:18:54,910][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170903, send json:  
DEBUG [2017-09-08 09:18:54,922][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:18:54,926][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170904, send json:  
DEBUG [2017-09-08 09:18:54,944][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:18:54,960][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170905, send json:  
DEBUG [2017-09-08 09:18:54,982][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:18:54,989][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170906, send json:  
DEBUG [2017-09-08 09:18:55,003][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:18:55,009][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170907, send json:  
DEBUG [2017-09-08 09:18:55,022][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:18:55,028][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170908, send json:  
DEBUG [2017-09-08 09:18:55,045][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":1,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123123","parent":null,"children":[]},{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]}] 
DEBUG [2017-09-08 09:18:55,055][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170909, send json:  
DEBUG [2017-09-08 09:18:55,065][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:18:55,116][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/list/刘奇, send json:  
DEBUG [2017-09-08 09:18:55,133][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":1,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123123","parent":null,"children":[]},{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]}] 
DEBUG [2017-09-08 09:18:55,196][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/requirement/list/刘奇, send json:  
DEBUG [2017-09-08 09:18:55,208][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:18:55,379][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/requirement/listBusiUsers, send json:  
DEBUG [2017-09-08 09:18:55,389][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:18:55,400][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-08 09:18:55,409][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3}] 
DEBUG [2017-09-08 09:18:55,427][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-08 09:18:55,442][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3}] 
DEBUG [2017-09-08 09:18:55,447][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/workOff/list, send json:  
DEBUG [2017-09-08 09:18:55,459][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:18:55,502][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/env/list, send json:  
DEBUG [2017-09-08 09:18:55,515][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":1,"system":"123123","type":"开发环境","serverType":"应用服务器","address":"123123","users":"123123","remark":"123123"}] 
DEBUG [2017-09-08 09:18:55,563][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/note/list, send json:  
DEBUG [2017-09-08 09:18:55,608][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":125,"name":"222","directory":true,"parent":null,"childrens":[{"id":126,"name":"qe123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><pre style=\"background-color:#2b2b2b;color:#a9b7c6;font-family:'Consolas';font-size:9.0pt;\"><span style=\"color:#cc7832;\">package </span>com.liuqi.tool.todo.ui<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.exceptions.TodoException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.model.User<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.Cache<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.ConfigProxy<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.application.Application<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.fxml.FXMLLoader<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Parent<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Scene<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.Tab<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.TabPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.layout.BorderPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Screen<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Stage<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.StageStyle<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.Logger<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.LoggerFactory<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>java.awt.geom.Rectangle2D<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.io.IOException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Iterator<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.List<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Optional<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">public class </span>Main <span style=\"color:#cc7832;\">extends </span>Application {<br>    <span style=\"color:#cc7832;\">private static </span>Logger <span style=\"color:#9876aa;font-style:italic;\">logger </span>= LoggerFactory.<span style=\"font-style:italic;\">getLogger</span>(Main.<span style=\"color:#cc7832;\">class</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">    </span><span style=\"color:#bbb529;\">@Override<br></span><span style=\"color:#bbb529;\">    </span><span style=\"color:#cc7832;\">public void </span><span style=\"color:#ffc66d;\">start</span>(Stage primaryStage) <span style=\"color:#cc7832;\">throws </span>Exception{<br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">检查是否保存用户名<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>String userName = ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.getSavedName()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>List&lt;User&gt; userList = Cache.<span style=\"font-style:italic;\">getUserList</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>== userList) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"No user exists, create an user first!\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            return;<br></span><span style=\"color:#cc7832;\">        </span>}<br><br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">根据保存的用户名查找用户<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>User findUser = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>!= userName &amp;&amp; !<span style=\"color:#6a8759;\">\"\"</span>.equals(userName)) {<br>            <span style=\"color:#cc7832;\">for </span>(User user : userList) {<br>                <span style=\"color:#cc7832;\">if </span>(userName.equals(user.getName()) || userName.equals(user.getId())) {<br>                    findUser = user<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    break;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }<br><br>        <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>== findUser) {<br>            <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">未找到用户，进行登录<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>LoginForm form = LoginForm.<span style=\"font-style:italic;\">getInstance</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>Optional&lt;User&gt; result = form.showAndWait()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>result.ifPresent(user -&gt; {<br>                <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>!= user) {<br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户与密码<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    try </span>{<br>                        ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.saveLoginInfo(loginUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>} <span style=\"color:#cc7832;\">catch </span>(TodoException e) {<br>                        <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Save login user info faield!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>}<br><br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>showMainView(<span style=\"color:#b389c5;\">primaryStage</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            })<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">else </span>{<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.info(<span style=\"color:#6a8759;\">\"Get saved user info succeeded, username: \" </span>+ findUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户信息<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>Cache.<span style=\"font-style:italic;\">setLoginUser</span>(findUser)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">找到用户，直接显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>showMainView(primaryStage)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>    }<br><br>    <span style=\"color:#cc7832;\">private void </span><span style=\"color:#ffc66d;\">showMainView</span>(Stage primaryStage) {<br>        BorderPane root = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        try </span>{<br>            root = FXMLLoader.<span style=\"font-style:italic;\">load</span>(getClass().getResource(<span style=\"color:#6a8759;\">\"sample.fxml\"</span>))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">catch </span>(IOException e) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Load fxml file failed!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>System.<span style=\"font-style:italic;\">exit</span>(<span style=\"color:#6897bb;\">0</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>        primaryStage.setTitle(<span style=\"color:#6a8759;\">\"</span><span style=\"color:#6a8759;font-family:'宋体';\">项目管理</span><span style=\"color:#6a8759;\">\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setScene(<span style=\"color:#cc7832;\">new </span>Scene(root))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setMaximized(<span style=\"color:#cc7832;\">true</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>TabPane tabPane = (TabPane) root.getCenter()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>Iterator&lt;Tab&gt; it = tabPane.getTabs().iterator()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        while </span>(it.hasNext()) {<br>            Tab tab = it.next()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"todo\"</span>.equals(tab.getId()) || <span style=\"color:#6a8759;\">\"requirement\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">continue;<br></span><span style=\"color:#cc7832;\">            </span>}<br><br>            User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"myCalendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()<br>                        || !ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.<span style=\"background-color:#344134;\">showMyCalendar</span>()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"calendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.showCalendar()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"userManager\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(loginUser.isNormalUser()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"env\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"note\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }     <br><br><br><span style=\"color:#808080;\">//        primaryStage.initStyle(StageStyle.UNDECORATED);<br></span><span style=\"color:#808080;\">//        javafx.geometry.Rectangle2D bounds = Screen.getPrimary().getVisualBounds();<br></span><span style=\"color:#808080;\">//        primaryStage.setX(bounds.getMinX());<br></span><span style=\"color:#808080;\">//        primaryStage.setY(bounds.getMinY());<br></span><span style=\"color:#808080;\">//        primaryStage.setWidth(bounds.getWidth());<br></span><span style=\"color:#808080;\">//        primaryStage.setHeight(bounds.getHeight());<br></span><span style=\"color:#808080;\"><br></span><span style=\"color:#808080;\">        </span>primaryStage.initStyle(StageStyle.<span style=\"color:#9876aa;font-style:italic;\">UNIFIED</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>root.getStylesheets().add(<span style=\"color:#6a8759;\">\"/main.css\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>primaryStage.show()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br><br><br>    <span style=\"color:#cc7832;\">public static void </span><span style=\"color:#ffc66d;\">main</span>(String[] args) {<br>        <span style=\"font-style:italic;\">launch</span>(args)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br>}<br></pre></body></html>","createTime":"2017-08-26 22:53:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":127,"name":"123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">1231123123123123123a &nbsp; a a &nbsp;斯塔大柳塔</font></p></body></html>","createTime":"2017-08-26 23:00:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":128,"name":"222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p>a<font face=\"Segoe UI\">斯塔克格勃工工</font></p></body></html>","createTime":"2017-08-26 23:00:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":6,"fileName":"1.doc","savedFileName":null,"noteId":128}]},{"id":129,"name":"12312312322222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">adfasdfsadf1111 &nbsp; &nbsp; adfad asd asdfasd asdf asd as asdfadsf a adasdfa dsaf asdasd fa工</font></p></body></html>","createTime":"2017-08-26 23:00:48","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":8,"fileName":"未解.docx","savedFileName":"3f042eed-40a5-4bf7-a4af-cd252dd3eed0..docx","noteId":129}]},{"id":130,"name":"123123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">ssdfsdf1212312311111aaaa</font></p></body></html>","createTime":"2017-08-26 23:00:56","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":132,"name":"2222222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">222222</font></p></body></html>","createTime":"2017-08-29 11:14:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":164,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123123</font></p></body></html>","createTime":"2017-08-30 09:25:14","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":165,"name":"aaaaaaa","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">aaaaaaaadfadsf asdf</font></p></body></html>","createTime":"2017-08-30 09:25:27","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":167,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123</font></p></body></html>","createTime":"2017-09-04 11:02:02","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]}],"content":"","createTime":"2017-08-26 22:53:07","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":126,"name":"qe123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><pre style=\"background-color:#2b2b2b;color:#a9b7c6;font-family:'Consolas';font-size:9.0pt;\"><span style=\"color:#cc7832;\">package </span>com.liuqi.tool.todo.ui<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.exceptions.TodoException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.model.User<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.Cache<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.ConfigProxy<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.application.Application<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.fxml.FXMLLoader<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Parent<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Scene<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.Tab<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.TabPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.layout.BorderPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Screen<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Stage<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.StageStyle<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.Logger<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.LoggerFactory<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>java.awt.geom.Rectangle2D<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.io.IOException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Iterator<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.List<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Optional<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">public class </span>Main <span style=\"color:#cc7832;\">extends </span>Application {<br>    <span style=\"color:#cc7832;\">private static </span>Logger <span style=\"color:#9876aa;font-style:italic;\">logger </span>= LoggerFactory.<span style=\"font-style:italic;\">getLogger</span>(Main.<span style=\"color:#cc7832;\">class</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">    </span><span style=\"color:#bbb529;\">@Override<br></span><span style=\"color:#bbb529;\">    </span><span style=\"color:#cc7832;\">public void </span><span style=\"color:#ffc66d;\">start</span>(Stage primaryStage) <span style=\"color:#cc7832;\">throws </span>Exception{<br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">检查是否保存用户名<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>String userName = ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.getSavedName()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>List&lt;User&gt; userList = Cache.<span style=\"font-style:italic;\">getUserList</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>== userList) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"No user exists, create an user first!\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            return;<br></span><span style=\"color:#cc7832;\">        </span>}<br><br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">根据保存的用户名查找用户<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>User findUser = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>!= userName &amp;&amp; !<span style=\"color:#6a8759;\">\"\"</span>.equals(userName)) {<br>            <span style=\"color:#cc7832;\">for </span>(User user : userList) {<br>                <span style=\"color:#cc7832;\">if </span>(userName.equals(user.getName()) || userName.equals(user.getId())) {<br>                    findUser = user<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    break;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }<br><br>        <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>== findUser) {<br>            <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">未找到用户，进行登录<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>LoginForm form = LoginForm.<span style=\"font-style:italic;\">getInstance</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>Optional&lt;User&gt; result = form.showAndWait()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>result.ifPresent(user -&gt; {<br>                <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>!= user) {<br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户与密码<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    try </span>{<br>                        ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.saveLoginInfo(loginUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>} <span style=\"color:#cc7832;\">catch </span>(TodoException e) {<br>                        <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Save login user info faield!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>}<br><br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>showMainView(<span style=\"color:#b389c5;\">primaryStage</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            })<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">else </span>{<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.info(<span style=\"color:#6a8759;\">\"Get saved user info succeeded, username: \" </span>+ findUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户信息<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>Cache.<span style=\"font-style:italic;\">setLoginUser</span>(findUser)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">找到用户，直接显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>showMainView(primaryStage)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>    }<br><br>    <span style=\"color:#cc7832;\">private void </span><span style=\"color:#ffc66d;\">showMainView</span>(Stage primaryStage) {<br>        BorderPane root = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        try </span>{<br>            root = FXMLLoader.<span style=\"font-style:italic;\">load</span>(getClass().getResource(<span style=\"color:#6a8759;\">\"sample.fxml\"</span>))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">catch </span>(IOException e) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Load fxml file failed!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>System.<span style=\"font-style:italic;\">exit</span>(<span style=\"color:#6897bb;\">0</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>        primaryStage.setTitle(<span style=\"color:#6a8759;\">\"</span><span style=\"color:#6a8759;font-family:'宋体';\">项目管理</span><span style=\"color:#6a8759;\">\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setScene(<span style=\"color:#cc7832;\">new </span>Scene(root))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setMaximized(<span style=\"color:#cc7832;\">true</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>TabPane tabPane = (TabPane) root.getCenter()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>Iterator&lt;Tab&gt; it = tabPane.getTabs().iterator()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        while </span>(it.hasNext()) {<br>            Tab tab = it.next()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"todo\"</span>.equals(tab.getId()) || <span style=\"color:#6a8759;\">\"requirement\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">continue;<br></span><span style=\"color:#cc7832;\">            </span>}<br><br>            User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"myCalendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()<br>                        || !ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.<span style=\"background-color:#344134;\">showMyCalendar</span>()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"calendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.showCalendar()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"userManager\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(loginUser.isNormalUser()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"env\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"note\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }     <br><br><br><span style=\"color:#808080;\">//        primaryStage.initStyle(StageStyle.UNDECORATED);<br></span><span style=\"color:#808080;\">//        javafx.geometry.Rectangle2D bounds = Screen.getPrimary().getVisualBounds();<br></span><span style=\"color:#808080;\">//        primaryStage.setX(bounds.getMinX());<br></span><span style=\"color:#808080;\">//        primaryStage.setY(bounds.getMinY());<br></span><span style=\"color:#808080;\">//        primaryStage.setWidth(bounds.getWidth());<br></span><span style=\"color:#808080;\">//        primaryStage.setHeight(bounds.getHeight());<br></span><span style=\"color:#808080;\"><br></span><span style=\"color:#808080;\">        </span>primaryStage.initStyle(StageStyle.<span style=\"color:#9876aa;font-style:italic;\">UNIFIED</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>root.getStylesheets().add(<span style=\"color:#6a8759;\">\"/main.css\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>primaryStage.show()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br><br><br>    <span style=\"color:#cc7832;\">public static void </span><span style=\"color:#ffc66d;\">main</span>(String[] args) {<br>        <span style=\"font-style:italic;\">launch</span>(args)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br>}<br></pre></body></html>","createTime":"2017-08-26 22:53:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":127,"name":"123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">1231123123123123123a &nbsp; a a &nbsp;斯塔大柳塔</font></p></body></html>","createTime":"2017-08-26 23:00:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":128,"name":"222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p>a<font face=\"Segoe UI\">斯塔克格勃工工</font></p></body></html>","createTime":"2017-08-26 23:00:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":6,"fileName":"1.doc","savedFileName":null,"noteId":128}]},{"id":129,"name":"12312312322222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">adfasdfsadf1111 &nbsp; &nbsp; adfad asd asdfasd asdf asd as asdfadsf a adasdfa dsaf asdasd fa工</font></p></body></html>","createTime":"2017-08-26 23:00:48","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":8,"fileName":"未解.docx","savedFileName":"3f042eed-40a5-4bf7-a4af-cd252dd3eed0..docx","noteId":129}]},{"id":130,"name":"123123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">ssdfsdf1212312311111aaaa</font></p></body></html>","createTime":"2017-08-26 23:00:56","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":132,"name":"2222222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">222222</font></p></body></html>","createTime":"2017-08-29 11:14:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":164,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123123</font></p></body></html>","createTime":"2017-08-30 09:25:14","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":165,"name":"aaaaaaa","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">aaaaaaaadfadsf asdf</font></p></body></html>","createTime":"2017-08-30 09:25:27","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":167,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123</font></p></body></html>","createTime":"2017-09-04 11:02:02","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]}] 
DEBUG [2017-09-08 09:19:13,199][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-08 09:19:13,672][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3}] 
INFO  [2017-09-08 09:19:13,877][] com.liuqi.tool.todo.ui.Main:69 - Get saved user info succeeded, username: 123123 
DEBUG [2017-09-08 09:19:14,238][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170903, send json:  
DEBUG [2017-09-08 09:19:14,263][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:19:14,287][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170904, send json:  
DEBUG [2017-09-08 09:19:14,295][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:19:14,305][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170905, send json:  
DEBUG [2017-09-08 09:19:14,313][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:19:14,319][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170906, send json:  
DEBUG [2017-09-08 09:19:14,331][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:19:14,339][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170907, send json:  
DEBUG [2017-09-08 09:19:14,355][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:19:14,364][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170908, send json:  
DEBUG [2017-09-08 09:19:14,384][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]}] 
DEBUG [2017-09-08 09:19:14,395][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170909, send json:  
DEBUG [2017-09-08 09:19:14,415][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:19:14,424][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170903, send json:  
DEBUG [2017-09-08 09:19:14,434][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:19:14,442][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170904, send json:  
DEBUG [2017-09-08 09:19:14,454][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:19:14,461][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170905, send json:  
DEBUG [2017-09-08 09:19:14,476][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:19:14,483][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170906, send json:  
DEBUG [2017-09-08 09:19:14,496][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:19:14,503][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170907, send json:  
DEBUG [2017-09-08 09:19:14,515][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:19:14,522][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170908, send json:  
DEBUG [2017-09-08 09:19:14,547][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]}] 
DEBUG [2017-09-08 09:19:14,554][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170909, send json:  
DEBUG [2017-09-08 09:19:14,587][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:19:14,597][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170903, send json:  
DEBUG [2017-09-08 09:19:14,609][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:19:14,614][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170904, send json:  
DEBUG [2017-09-08 09:19:14,627][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:19:14,631][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170905, send json:  
DEBUG [2017-09-08 09:19:14,643][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:19:14,649][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170906, send json:  
DEBUG [2017-09-08 09:19:14,662][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:19:14,668][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170907, send json:  
DEBUG [2017-09-08 09:19:14,685][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:19:14,693][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170908, send json:  
DEBUG [2017-09-08 09:19:14,710][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]}] 
DEBUG [2017-09-08 09:19:14,720][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170909, send json:  
DEBUG [2017-09-08 09:19:14,730][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:19:14,800][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/list/123123, send json:  
DEBUG [2017-09-08 09:19:14,833][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]}] 
DEBUG [2017-09-08 09:19:14,907][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/requirement/list/123123, send json:  
DEBUG [2017-09-08 09:19:14,947][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:19:15,153][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/requirement/listBusiUsers, send json:  
DEBUG [2017-09-08 09:19:15,163][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:19:15,185][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/workOff/list, send json:  
DEBUG [2017-09-08 09:19:15,192][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:19:15,233][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/env/list, send json:  
DEBUG [2017-09-08 09:19:15,239][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":1,"system":"123123","type":"开发环境","serverType":"应用服务器","address":"123123","users":"123123","remark":"123123"}] 
DEBUG [2017-09-08 09:19:15,277][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/note/list, send json:  
DEBUG [2017-09-08 09:19:15,314][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":125,"name":"222","directory":true,"parent":null,"childrens":[{"id":126,"name":"qe123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><pre style=\"background-color:#2b2b2b;color:#a9b7c6;font-family:'Consolas';font-size:9.0pt;\"><span style=\"color:#cc7832;\">package </span>com.liuqi.tool.todo.ui<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.exceptions.TodoException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.model.User<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.Cache<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.ConfigProxy<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.application.Application<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.fxml.FXMLLoader<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Parent<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Scene<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.Tab<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.TabPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.layout.BorderPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Screen<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Stage<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.StageStyle<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.Logger<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.LoggerFactory<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>java.awt.geom.Rectangle2D<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.io.IOException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Iterator<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.List<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Optional<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">public class </span>Main <span style=\"color:#cc7832;\">extends </span>Application {<br>    <span style=\"color:#cc7832;\">private static </span>Logger <span style=\"color:#9876aa;font-style:italic;\">logger </span>= LoggerFactory.<span style=\"font-style:italic;\">getLogger</span>(Main.<span style=\"color:#cc7832;\">class</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">    </span><span style=\"color:#bbb529;\">@Override<br></span><span style=\"color:#bbb529;\">    </span><span style=\"color:#cc7832;\">public void </span><span style=\"color:#ffc66d;\">start</span>(Stage primaryStage) <span style=\"color:#cc7832;\">throws </span>Exception{<br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">检查是否保存用户名<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>String userName = ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.getSavedName()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>List&lt;User&gt; userList = Cache.<span style=\"font-style:italic;\">getUserList</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>== userList) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"No user exists, create an user first!\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            return;<br></span><span style=\"color:#cc7832;\">        </span>}<br><br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">根据保存的用户名查找用户<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>User findUser = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>!= userName &amp;&amp; !<span style=\"color:#6a8759;\">\"\"</span>.equals(userName)) {<br>            <span style=\"color:#cc7832;\">for </span>(User user : userList) {<br>                <span style=\"color:#cc7832;\">if </span>(userName.equals(user.getName()) || userName.equals(user.getId())) {<br>                    findUser = user<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    break;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }<br><br>        <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>== findUser) {<br>            <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">未找到用户，进行登录<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>LoginForm form = LoginForm.<span style=\"font-style:italic;\">getInstance</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>Optional&lt;User&gt; result = form.showAndWait()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>result.ifPresent(user -&gt; {<br>                <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>!= user) {<br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户与密码<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    try </span>{<br>                        ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.saveLoginInfo(loginUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>} <span style=\"color:#cc7832;\">catch </span>(TodoException e) {<br>                        <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Save login user info faield!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>}<br><br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>showMainView(<span style=\"color:#b389c5;\">primaryStage</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            })<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">else </span>{<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.info(<span style=\"color:#6a8759;\">\"Get saved user info succeeded, username: \" </span>+ findUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户信息<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>Cache.<span style=\"font-style:italic;\">setLoginUser</span>(findUser)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">找到用户，直接显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>showMainView(primaryStage)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>    }<br><br>    <span style=\"color:#cc7832;\">private void </span><span style=\"color:#ffc66d;\">showMainView</span>(Stage primaryStage) {<br>        BorderPane root = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        try </span>{<br>            root = FXMLLoader.<span style=\"font-style:italic;\">load</span>(getClass().getResource(<span style=\"color:#6a8759;\">\"sample.fxml\"</span>))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">catch </span>(IOException e) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Load fxml file failed!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>System.<span style=\"font-style:italic;\">exit</span>(<span style=\"color:#6897bb;\">0</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>        primaryStage.setTitle(<span style=\"color:#6a8759;\">\"</span><span style=\"color:#6a8759;font-family:'宋体';\">项目管理</span><span style=\"color:#6a8759;\">\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setScene(<span style=\"color:#cc7832;\">new </span>Scene(root))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setMaximized(<span style=\"color:#cc7832;\">true</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>TabPane tabPane = (TabPane) root.getCenter()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>Iterator&lt;Tab&gt; it = tabPane.getTabs().iterator()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        while </span>(it.hasNext()) {<br>            Tab tab = it.next()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"todo\"</span>.equals(tab.getId()) || <span style=\"color:#6a8759;\">\"requirement\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">continue;<br></span><span style=\"color:#cc7832;\">            </span>}<br><br>            User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"myCalendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()<br>                        || !ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.<span style=\"background-color:#344134;\">showMyCalendar</span>()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"calendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.showCalendar()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"userManager\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(loginUser.isNormalUser()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"env\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"note\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }     <br><br><br><span style=\"color:#808080;\">//        primaryStage.initStyle(StageStyle.UNDECORATED);<br></span><span style=\"color:#808080;\">//        javafx.geometry.Rectangle2D bounds = Screen.getPrimary().getVisualBounds();<br></span><span style=\"color:#808080;\">//        primaryStage.setX(bounds.getMinX());<br></span><span style=\"color:#808080;\">//        primaryStage.setY(bounds.getMinY());<br></span><span style=\"color:#808080;\">//        primaryStage.setWidth(bounds.getWidth());<br></span><span style=\"color:#808080;\">//        primaryStage.setHeight(bounds.getHeight());<br></span><span style=\"color:#808080;\"><br></span><span style=\"color:#808080;\">        </span>primaryStage.initStyle(StageStyle.<span style=\"color:#9876aa;font-style:italic;\">UNIFIED</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>root.getStylesheets().add(<span style=\"color:#6a8759;\">\"/main.css\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>primaryStage.show()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br><br><br>    <span style=\"color:#cc7832;\">public static void </span><span style=\"color:#ffc66d;\">main</span>(String[] args) {<br>        <span style=\"font-style:italic;\">launch</span>(args)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br>}<br></pre></body></html>","createTime":"2017-08-26 22:53:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":127,"name":"123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">1231123123123123123a &nbsp; a a &nbsp;斯塔大柳塔</font></p></body></html>","createTime":"2017-08-26 23:00:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":128,"name":"222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p>a<font face=\"Segoe UI\">斯塔克格勃工工</font></p></body></html>","createTime":"2017-08-26 23:00:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":6,"fileName":"1.doc","savedFileName":null,"noteId":128}]},{"id":129,"name":"12312312322222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">adfasdfsadf1111 &nbsp; &nbsp; adfad asd asdfasd asdf asd as asdfadsf a adasdfa dsaf asdasd fa工</font></p></body></html>","createTime":"2017-08-26 23:00:48","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":8,"fileName":"未解.docx","savedFileName":"3f042eed-40a5-4bf7-a4af-cd252dd3eed0..docx","noteId":129}]},{"id":130,"name":"123123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">ssdfsdf1212312311111aaaa</font></p></body></html>","createTime":"2017-08-26 23:00:56","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":132,"name":"2222222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">222222</font></p></body></html>","createTime":"2017-08-29 11:14:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":164,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123123</font></p></body></html>","createTime":"2017-08-30 09:25:14","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":165,"name":"aaaaaaa","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">aaaaaaaadfadsf asdf</font></p></body></html>","createTime":"2017-08-30 09:25:27","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":167,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123</font></p></body></html>","createTime":"2017-09-04 11:02:02","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]}],"content":"","createTime":"2017-08-26 22:53:07","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":126,"name":"qe123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><pre style=\"background-color:#2b2b2b;color:#a9b7c6;font-family:'Consolas';font-size:9.0pt;\"><span style=\"color:#cc7832;\">package </span>com.liuqi.tool.todo.ui<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.exceptions.TodoException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.model.User<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.Cache<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.ConfigProxy<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.application.Application<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.fxml.FXMLLoader<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Parent<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Scene<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.Tab<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.TabPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.layout.BorderPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Screen<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Stage<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.StageStyle<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.Logger<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.LoggerFactory<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>java.awt.geom.Rectangle2D<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.io.IOException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Iterator<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.List<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Optional<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">public class </span>Main <span style=\"color:#cc7832;\">extends </span>Application {<br>    <span style=\"color:#cc7832;\">private static </span>Logger <span style=\"color:#9876aa;font-style:italic;\">logger </span>= LoggerFactory.<span style=\"font-style:italic;\">getLogger</span>(Main.<span style=\"color:#cc7832;\">class</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">    </span><span style=\"color:#bbb529;\">@Override<br></span><span style=\"color:#bbb529;\">    </span><span style=\"color:#cc7832;\">public void </span><span style=\"color:#ffc66d;\">start</span>(Stage primaryStage) <span style=\"color:#cc7832;\">throws </span>Exception{<br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">检查是否保存用户名<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>String userName = ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.getSavedName()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>List&lt;User&gt; userList = Cache.<span style=\"font-style:italic;\">getUserList</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>== userList) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"No user exists, create an user first!\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            return;<br></span><span style=\"color:#cc7832;\">        </span>}<br><br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">根据保存的用户名查找用户<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>User findUser = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>!= userName &amp;&amp; !<span style=\"color:#6a8759;\">\"\"</span>.equals(userName)) {<br>            <span style=\"color:#cc7832;\">for </span>(User user : userList) {<br>                <span style=\"color:#cc7832;\">if </span>(userName.equals(user.getName()) || userName.equals(user.getId())) {<br>                    findUser = user<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    break;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }<br><br>        <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>== findUser) {<br>            <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">未找到用户，进行登录<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>LoginForm form = LoginForm.<span style=\"font-style:italic;\">getInstance</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>Optional&lt;User&gt; result = form.showAndWait()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>result.ifPresent(user -&gt; {<br>                <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>!= user) {<br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户与密码<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    try </span>{<br>                        ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.saveLoginInfo(loginUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>} <span style=\"color:#cc7832;\">catch </span>(TodoException e) {<br>                        <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Save login user info faield!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>}<br><br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>showMainView(<span style=\"color:#b389c5;\">primaryStage</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            })<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">else </span>{<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.info(<span style=\"color:#6a8759;\">\"Get saved user info succeeded, username: \" </span>+ findUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户信息<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>Cache.<span style=\"font-style:italic;\">setLoginUser</span>(findUser)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">找到用户，直接显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>showMainView(primaryStage)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>    }<br><br>    <span style=\"color:#cc7832;\">private void </span><span style=\"color:#ffc66d;\">showMainView</span>(Stage primaryStage) {<br>        BorderPane root = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        try </span>{<br>            root = FXMLLoader.<span style=\"font-style:italic;\">load</span>(getClass().getResource(<span style=\"color:#6a8759;\">\"sample.fxml\"</span>))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">catch </span>(IOException e) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Load fxml file failed!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>System.<span style=\"font-style:italic;\">exit</span>(<span style=\"color:#6897bb;\">0</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>        primaryStage.setTitle(<span style=\"color:#6a8759;\">\"</span><span style=\"color:#6a8759;font-family:'宋体';\">项目管理</span><span style=\"color:#6a8759;\">\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setScene(<span style=\"color:#cc7832;\">new </span>Scene(root))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setMaximized(<span style=\"color:#cc7832;\">true</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>TabPane tabPane = (TabPane) root.getCenter()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>Iterator&lt;Tab&gt; it = tabPane.getTabs().iterator()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        while </span>(it.hasNext()) {<br>            Tab tab = it.next()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"todo\"</span>.equals(tab.getId()) || <span style=\"color:#6a8759;\">\"requirement\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">continue;<br></span><span style=\"color:#cc7832;\">            </span>}<br><br>            User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"myCalendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()<br>                        || !ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.<span style=\"background-color:#344134;\">showMyCalendar</span>()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"calendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.showCalendar()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"userManager\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(loginUser.isNormalUser()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"env\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"note\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }     <br><br><br><span style=\"color:#808080;\">//        primaryStage.initStyle(StageStyle.UNDECORATED);<br></span><span style=\"color:#808080;\">//        javafx.geometry.Rectangle2D bounds = Screen.getPrimary().getVisualBounds();<br></span><span style=\"color:#808080;\">//        primaryStage.setX(bounds.getMinX());<br></span><span style=\"color:#808080;\">//        primaryStage.setY(bounds.getMinY());<br></span><span style=\"color:#808080;\">//        primaryStage.setWidth(bounds.getWidth());<br></span><span style=\"color:#808080;\">//        primaryStage.setHeight(bounds.getHeight());<br></span><span style=\"color:#808080;\"><br></span><span style=\"color:#808080;\">        </span>primaryStage.initStyle(StageStyle.<span style=\"color:#9876aa;font-style:italic;\">UNIFIED</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>root.getStylesheets().add(<span style=\"color:#6a8759;\">\"/main.css\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>primaryStage.show()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br><br><br>    <span style=\"color:#cc7832;\">public static void </span><span style=\"color:#ffc66d;\">main</span>(String[] args) {<br>        <span style=\"font-style:italic;\">launch</span>(args)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br>}<br></pre></body></html>","createTime":"2017-08-26 22:53:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":127,"name":"123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">1231123123123123123a &nbsp; a a &nbsp;斯塔大柳塔</font></p></body></html>","createTime":"2017-08-26 23:00:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":128,"name":"222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p>a<font face=\"Segoe UI\">斯塔克格勃工工</font></p></body></html>","createTime":"2017-08-26 23:00:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":6,"fileName":"1.doc","savedFileName":null,"noteId":128}]},{"id":129,"name":"12312312322222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">adfasdfsadf1111 &nbsp; &nbsp; adfad asd asdfasd asdf asd as asdfadsf a adasdfa dsaf asdasd fa工</font></p></body></html>","createTime":"2017-08-26 23:00:48","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":8,"fileName":"未解.docx","savedFileName":"3f042eed-40a5-4bf7-a4af-cd252dd3eed0..docx","noteId":129}]},{"id":130,"name":"123123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">ssdfsdf1212312311111aaaa</font></p></body></html>","createTime":"2017-08-26 23:00:56","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":132,"name":"2222222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">222222</font></p></body></html>","createTime":"2017-08-29 11:14:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":164,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123123</font></p></body></html>","createTime":"2017-08-30 09:25:14","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":165,"name":"aaaaaaa","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">aaaaaaaadfadsf asdf</font></p></body></html>","createTime":"2017-08-30 09:25:27","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":167,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123</font></p></body></html>","createTime":"2017-09-04 11:02:02","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]}] 
DEBUG [2017-09-08 09:19:52,903][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/list/123123, send json:  
DEBUG [2017-09-08 09:19:52,954][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]}] 
DEBUG [2017-09-08 09:20:17,451][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-08 09:20:17,905][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3}] 
INFO  [2017-09-08 09:20:18,114][] com.liuqi.tool.todo.ui.Main:69 - Get saved user info succeeded, username: 刘奇 
DEBUG [2017-09-08 09:20:18,512][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170903, send json:  
DEBUG [2017-09-08 09:20:18,541][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:20:18,572][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170904, send json:  
DEBUG [2017-09-08 09:20:18,581][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:20:18,588][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170905, send json:  
DEBUG [2017-09-08 09:20:18,601][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:20:18,610][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170906, send json:  
DEBUG [2017-09-08 09:20:18,620][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:20:18,628][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170907, send json:  
DEBUG [2017-09-08 09:20:18,644][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:20:18,659][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170908, send json:  
DEBUG [2017-09-08 09:20:18,677][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":1,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123123","parent":null,"children":[]},{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]}] 
DEBUG [2017-09-08 09:20:18,684][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170909, send json:  
DEBUG [2017-09-08 09:20:18,697][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:20:18,703][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170903, send json:  
DEBUG [2017-09-08 09:20:18,713][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:20:18,717][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170904, send json:  
DEBUG [2017-09-08 09:20:18,725][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:20:18,731][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170905, send json:  
DEBUG [2017-09-08 09:20:18,739][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:20:18,743][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170906, send json:  
DEBUG [2017-09-08 09:20:18,755][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:20:18,760][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170907, send json:  
DEBUG [2017-09-08 09:20:18,769][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:20:18,774][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170908, send json:  
DEBUG [2017-09-08 09:20:18,791][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":1,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123123","parent":null,"children":[]},{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]}] 
DEBUG [2017-09-08 09:20:18,796][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170909, send json:  
DEBUG [2017-09-08 09:20:18,816][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:20:18,831][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170903, send json:  
DEBUG [2017-09-08 09:20:18,844][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:20:18,852][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170904, send json:  
DEBUG [2017-09-08 09:20:18,871][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:20:18,877][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170905, send json:  
DEBUG [2017-09-08 09:20:18,892][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:20:18,898][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170906, send json:  
DEBUG [2017-09-08 09:20:18,912][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:20:18,918][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170907, send json:  
DEBUG [2017-09-08 09:20:18,928][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:20:18,932][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170908, send json:  
DEBUG [2017-09-08 09:20:18,943][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":1,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123123","parent":null,"children":[]},{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]}] 
DEBUG [2017-09-08 09:20:18,951][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170909, send json:  
DEBUG [2017-09-08 09:20:18,962][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:20:19,013][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/list/刘奇, send json:  
DEBUG [2017-09-08 09:20:19,029][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":1,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123123","parent":null,"children":[]},{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]}] 
DEBUG [2017-09-08 09:20:19,077][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/requirement/list/刘奇, send json:  
DEBUG [2017-09-08 09:20:19,090][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:20:19,226][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/requirement/listBusiUsers, send json:  
DEBUG [2017-09-08 09:20:19,234][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:20:19,242][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-08 09:20:19,250][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3}] 
DEBUG [2017-09-08 09:20:19,262][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-08 09:20:19,271][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3}] 
DEBUG [2017-09-08 09:20:19,274][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/workOff/list, send json:  
DEBUG [2017-09-08 09:20:19,281][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:20:19,313][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/env/list, send json:  
DEBUG [2017-09-08 09:20:19,320][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":1,"system":"123123","type":"开发环境","serverType":"应用服务器","address":"123123","users":"123123","remark":"123123"}] 
DEBUG [2017-09-08 09:20:19,357][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/note/list, send json:  
DEBUG [2017-09-08 09:20:19,407][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":125,"name":"222","directory":true,"parent":null,"childrens":[{"id":126,"name":"qe123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><pre style=\"background-color:#2b2b2b;color:#a9b7c6;font-family:'Consolas';font-size:9.0pt;\"><span style=\"color:#cc7832;\">package </span>com.liuqi.tool.todo.ui<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.exceptions.TodoException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.model.User<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.Cache<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.ConfigProxy<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.application.Application<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.fxml.FXMLLoader<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Parent<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Scene<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.Tab<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.TabPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.layout.BorderPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Screen<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Stage<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.StageStyle<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.Logger<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.LoggerFactory<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>java.awt.geom.Rectangle2D<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.io.IOException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Iterator<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.List<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Optional<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">public class </span>Main <span style=\"color:#cc7832;\">extends </span>Application {<br>    <span style=\"color:#cc7832;\">private static </span>Logger <span style=\"color:#9876aa;font-style:italic;\">logger </span>= LoggerFactory.<span style=\"font-style:italic;\">getLogger</span>(Main.<span style=\"color:#cc7832;\">class</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">    </span><span style=\"color:#bbb529;\">@Override<br></span><span style=\"color:#bbb529;\">    </span><span style=\"color:#cc7832;\">public void </span><span style=\"color:#ffc66d;\">start</span>(Stage primaryStage) <span style=\"color:#cc7832;\">throws </span>Exception{<br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">检查是否保存用户名<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>String userName = ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.getSavedName()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>List&lt;User&gt; userList = Cache.<span style=\"font-style:italic;\">getUserList</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>== userList) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"No user exists, create an user first!\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            return;<br></span><span style=\"color:#cc7832;\">        </span>}<br><br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">根据保存的用户名查找用户<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>User findUser = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>!= userName &amp;&amp; !<span style=\"color:#6a8759;\">\"\"</span>.equals(userName)) {<br>            <span style=\"color:#cc7832;\">for </span>(User user : userList) {<br>                <span style=\"color:#cc7832;\">if </span>(userName.equals(user.getName()) || userName.equals(user.getId())) {<br>                    findUser = user<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    break;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }<br><br>        <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>== findUser) {<br>            <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">未找到用户，进行登录<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>LoginForm form = LoginForm.<span style=\"font-style:italic;\">getInstance</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>Optional&lt;User&gt; result = form.showAndWait()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>result.ifPresent(user -&gt; {<br>                <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>!= user) {<br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户与密码<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    try </span>{<br>                        ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.saveLoginInfo(loginUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>} <span style=\"color:#cc7832;\">catch </span>(TodoException e) {<br>                        <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Save login user info faield!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>}<br><br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>showMainView(<span style=\"color:#b389c5;\">primaryStage</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            })<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">else </span>{<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.info(<span style=\"color:#6a8759;\">\"Get saved user info succeeded, username: \" </span>+ findUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户信息<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>Cache.<span style=\"font-style:italic;\">setLoginUser</span>(findUser)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">找到用户，直接显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>showMainView(primaryStage)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>    }<br><br>    <span style=\"color:#cc7832;\">private void </span><span style=\"color:#ffc66d;\">showMainView</span>(Stage primaryStage) {<br>        BorderPane root = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        try </span>{<br>            root = FXMLLoader.<span style=\"font-style:italic;\">load</span>(getClass().getResource(<span style=\"color:#6a8759;\">\"sample.fxml\"</span>))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">catch </span>(IOException e) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Load fxml file failed!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>System.<span style=\"font-style:italic;\">exit</span>(<span style=\"color:#6897bb;\">0</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>        primaryStage.setTitle(<span style=\"color:#6a8759;\">\"</span><span style=\"color:#6a8759;font-family:'宋体';\">项目管理</span><span style=\"color:#6a8759;\">\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setScene(<span style=\"color:#cc7832;\">new </span>Scene(root))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setMaximized(<span style=\"color:#cc7832;\">true</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>TabPane tabPane = (TabPane) root.getCenter()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>Iterator&lt;Tab&gt; it = tabPane.getTabs().iterator()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        while </span>(it.hasNext()) {<br>            Tab tab = it.next()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"todo\"</span>.equals(tab.getId()) || <span style=\"color:#6a8759;\">\"requirement\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">continue;<br></span><span style=\"color:#cc7832;\">            </span>}<br><br>            User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"myCalendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()<br>                        || !ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.<span style=\"background-color:#344134;\">showMyCalendar</span>()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"calendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.showCalendar()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"userManager\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(loginUser.isNormalUser()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"env\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"note\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }     <br><br><br><span style=\"color:#808080;\">//        primaryStage.initStyle(StageStyle.UNDECORATED);<br></span><span style=\"color:#808080;\">//        javafx.geometry.Rectangle2D bounds = Screen.getPrimary().getVisualBounds();<br></span><span style=\"color:#808080;\">//        primaryStage.setX(bounds.getMinX());<br></span><span style=\"color:#808080;\">//        primaryStage.setY(bounds.getMinY());<br></span><span style=\"color:#808080;\">//        primaryStage.setWidth(bounds.getWidth());<br></span><span style=\"color:#808080;\">//        primaryStage.setHeight(bounds.getHeight());<br></span><span style=\"color:#808080;\"><br></span><span style=\"color:#808080;\">        </span>primaryStage.initStyle(StageStyle.<span style=\"color:#9876aa;font-style:italic;\">UNIFIED</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>root.getStylesheets().add(<span style=\"color:#6a8759;\">\"/main.css\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>primaryStage.show()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br><br><br>    <span style=\"color:#cc7832;\">public static void </span><span style=\"color:#ffc66d;\">main</span>(String[] args) {<br>        <span style=\"font-style:italic;\">launch</span>(args)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br>}<br></pre></body></html>","createTime":"2017-08-26 22:53:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":127,"name":"123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">1231123123123123123a &nbsp; a a &nbsp;斯塔大柳塔</font></p></body></html>","createTime":"2017-08-26 23:00:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":128,"name":"222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p>a<font face=\"Segoe UI\">斯塔克格勃工工</font></p></body></html>","createTime":"2017-08-26 23:00:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":6,"fileName":"1.doc","savedFileName":null,"noteId":128}]},{"id":129,"name":"12312312322222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">adfasdfsadf1111 &nbsp; &nbsp; adfad asd asdfasd asdf asd as asdfadsf a adasdfa dsaf asdasd fa工</font></p></body></html>","createTime":"2017-08-26 23:00:48","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":8,"fileName":"未解.docx","savedFileName":"3f042eed-40a5-4bf7-a4af-cd252dd3eed0..docx","noteId":129}]},{"id":130,"name":"123123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">ssdfsdf1212312311111aaaa</font></p></body></html>","createTime":"2017-08-26 23:00:56","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":132,"name":"2222222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">222222</font></p></body></html>","createTime":"2017-08-29 11:14:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":164,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123123</font></p></body></html>","createTime":"2017-08-30 09:25:14","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":165,"name":"aaaaaaa","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">aaaaaaaadfadsf asdf</font></p></body></html>","createTime":"2017-08-30 09:25:27","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":167,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123</font></p></body></html>","createTime":"2017-09-04 11:02:02","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]}],"content":"","createTime":"2017-08-26 22:53:07","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":126,"name":"qe123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><pre style=\"background-color:#2b2b2b;color:#a9b7c6;font-family:'Consolas';font-size:9.0pt;\"><span style=\"color:#cc7832;\">package </span>com.liuqi.tool.todo.ui<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.exceptions.TodoException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.model.User<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.Cache<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.ConfigProxy<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.application.Application<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.fxml.FXMLLoader<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Parent<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Scene<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.Tab<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.TabPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.layout.BorderPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Screen<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Stage<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.StageStyle<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.Logger<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.LoggerFactory<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>java.awt.geom.Rectangle2D<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.io.IOException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Iterator<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.List<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Optional<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">public class </span>Main <span style=\"color:#cc7832;\">extends </span>Application {<br>    <span style=\"color:#cc7832;\">private static </span>Logger <span style=\"color:#9876aa;font-style:italic;\">logger </span>= LoggerFactory.<span style=\"font-style:italic;\">getLogger</span>(Main.<span style=\"color:#cc7832;\">class</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">    </span><span style=\"color:#bbb529;\">@Override<br></span><span style=\"color:#bbb529;\">    </span><span style=\"color:#cc7832;\">public void </span><span style=\"color:#ffc66d;\">start</span>(Stage primaryStage) <span style=\"color:#cc7832;\">throws </span>Exception{<br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">检查是否保存用户名<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>String userName = ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.getSavedName()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>List&lt;User&gt; userList = Cache.<span style=\"font-style:italic;\">getUserList</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>== userList) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"No user exists, create an user first!\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            return;<br></span><span style=\"color:#cc7832;\">        </span>}<br><br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">根据保存的用户名查找用户<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>User findUser = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>!= userName &amp;&amp; !<span style=\"color:#6a8759;\">\"\"</span>.equals(userName)) {<br>            <span style=\"color:#cc7832;\">for </span>(User user : userList) {<br>                <span style=\"color:#cc7832;\">if </span>(userName.equals(user.getName()) || userName.equals(user.getId())) {<br>                    findUser = user<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    break;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }<br><br>        <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>== findUser) {<br>            <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">未找到用户，进行登录<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>LoginForm form = LoginForm.<span style=\"font-style:italic;\">getInstance</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>Optional&lt;User&gt; result = form.showAndWait()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>result.ifPresent(user -&gt; {<br>                <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>!= user) {<br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户与密码<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    try </span>{<br>                        ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.saveLoginInfo(loginUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>} <span style=\"color:#cc7832;\">catch </span>(TodoException e) {<br>                        <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Save login user info faield!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>}<br><br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>showMainView(<span style=\"color:#b389c5;\">primaryStage</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            })<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">else </span>{<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.info(<span style=\"color:#6a8759;\">\"Get saved user info succeeded, username: \" </span>+ findUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户信息<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>Cache.<span style=\"font-style:italic;\">setLoginUser</span>(findUser)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">找到用户，直接显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>showMainView(primaryStage)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>    }<br><br>    <span style=\"color:#cc7832;\">private void </span><span style=\"color:#ffc66d;\">showMainView</span>(Stage primaryStage) {<br>        BorderPane root = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        try </span>{<br>            root = FXMLLoader.<span style=\"font-style:italic;\">load</span>(getClass().getResource(<span style=\"color:#6a8759;\">\"sample.fxml\"</span>))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">catch </span>(IOException e) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Load fxml file failed!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>System.<span style=\"font-style:italic;\">exit</span>(<span style=\"color:#6897bb;\">0</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>        primaryStage.setTitle(<span style=\"color:#6a8759;\">\"</span><span style=\"color:#6a8759;font-family:'宋体';\">项目管理</span><span style=\"color:#6a8759;\">\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setScene(<span style=\"color:#cc7832;\">new </span>Scene(root))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setMaximized(<span style=\"color:#cc7832;\">true</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>TabPane tabPane = (TabPane) root.getCenter()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>Iterator&lt;Tab&gt; it = tabPane.getTabs().iterator()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        while </span>(it.hasNext()) {<br>            Tab tab = it.next()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"todo\"</span>.equals(tab.getId()) || <span style=\"color:#6a8759;\">\"requirement\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">continue;<br></span><span style=\"color:#cc7832;\">            </span>}<br><br>            User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"myCalendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()<br>                        || !ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.<span style=\"background-color:#344134;\">showMyCalendar</span>()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"calendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.showCalendar()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"userManager\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(loginUser.isNormalUser()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"env\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"note\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }     <br><br><br><span style=\"color:#808080;\">//        primaryStage.initStyle(StageStyle.UNDECORATED);<br></span><span style=\"color:#808080;\">//        javafx.geometry.Rectangle2D bounds = Screen.getPrimary().getVisualBounds();<br></span><span style=\"color:#808080;\">//        primaryStage.setX(bounds.getMinX());<br></span><span style=\"color:#808080;\">//        primaryStage.setY(bounds.getMinY());<br></span><span style=\"color:#808080;\">//        primaryStage.setWidth(bounds.getWidth());<br></span><span style=\"color:#808080;\">//        primaryStage.setHeight(bounds.getHeight());<br></span><span style=\"color:#808080;\"><br></span><span style=\"color:#808080;\">        </span>primaryStage.initStyle(StageStyle.<span style=\"color:#9876aa;font-style:italic;\">UNIFIED</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>root.getStylesheets().add(<span style=\"color:#6a8759;\">\"/main.css\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>primaryStage.show()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br><br><br>    <span style=\"color:#cc7832;\">public static void </span><span style=\"color:#ffc66d;\">main</span>(String[] args) {<br>        <span style=\"font-style:italic;\">launch</span>(args)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br>}<br></pre></body></html>","createTime":"2017-08-26 22:53:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":127,"name":"123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">1231123123123123123a &nbsp; a a &nbsp;斯塔大柳塔</font></p></body></html>","createTime":"2017-08-26 23:00:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":128,"name":"222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p>a<font face=\"Segoe UI\">斯塔克格勃工工</font></p></body></html>","createTime":"2017-08-26 23:00:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":6,"fileName":"1.doc","savedFileName":null,"noteId":128}]},{"id":129,"name":"12312312322222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">adfasdfsadf1111 &nbsp; &nbsp; adfad asd asdfasd asdf asd as asdfadsf a adasdfa dsaf asdasd fa工</font></p></body></html>","createTime":"2017-08-26 23:00:48","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":8,"fileName":"未解.docx","savedFileName":"3f042eed-40a5-4bf7-a4af-cd252dd3eed0..docx","noteId":129}]},{"id":130,"name":"123123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">ssdfsdf1212312311111aaaa</font></p></body></html>","createTime":"2017-08-26 23:00:56","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":132,"name":"2222222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">222222</font></p></body></html>","createTime":"2017-08-29 11:14:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":164,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123123</font></p></body></html>","createTime":"2017-08-30 09:25:14","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":165,"name":"aaaaaaa","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">aaaaaaaadfadsf asdf</font></p></body></html>","createTime":"2017-08-30 09:25:27","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":167,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123</font></p></body></html>","createTime":"2017-09-04 11:02:02","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]}] 
DEBUG [2017-09-08 09:20:36,640][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/saveUser, send json: {"name":"所有人","password":null,"corp":"","role":"user","status":null,"inDate":"20170908","outDate":null,"id":null} 
DEBUG [2017-09-08 09:20:36,652][] com.liuqi.tool.todo.util.Ajax:290 - Get response json:  
DEBUG [2017-09-08 09:20:36,666][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-08 09:20:36,675][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},{"name":"所有人","password":null,"corp":"","role":"user","status":null,"inDate":"20170908","outDate":null,"id":4}] 
DEBUG [2017-09-08 09:20:46,641][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/save, send json: {"id":null,"title":"123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"所有人","password":null,"corp":"","role":"user","status":null,"inDate":"20170908","outDate":null,"id":4},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":null} 
DEBUG [2017-09-08 09:20:46,655][] com.liuqi.tool.todo.util.Ajax:290 - Get response json:  
DEBUG [2017-09-08 09:20:46,665][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/list/刘奇, send json:  
DEBUG [2017-09-08 09:20:46,684][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":1,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123123","parent":null,"children":[]},{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]},{"id":4,"title":"123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"所有人","password":null,"corp":"","role":"user","status":null,"inDate":"20170908","outDate":null,"id":4},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]}] 
DEBUG [2017-09-08 09:21:03,985][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-08 09:21:04,418][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},{"name":"所有人","password":null,"corp":"","role":"user","status":null,"inDate":"20170908","outDate":null,"id":4}] 
INFO  [2017-09-08 09:21:04,617][] com.liuqi.tool.todo.ui.Main:69 - Get saved user info succeeded, username: 123123 
DEBUG [2017-09-08 09:21:04,948][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170903, send json:  
DEBUG [2017-09-08 09:21:04,963][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:21:04,986][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170904, send json:  
DEBUG [2017-09-08 09:21:04,995][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:21:05,002][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170905, send json:  
DEBUG [2017-09-08 09:21:05,013][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:21:05,021][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170906, send json:  
DEBUG [2017-09-08 09:21:05,034][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:21:05,040][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170907, send json:  
DEBUG [2017-09-08 09:21:05,055][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:21:05,064][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170908, send json:  
DEBUG [2017-09-08 09:21:05,080][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]},{"id":4,"title":"123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"所有人","password":null,"corp":"","role":"user","status":null,"inDate":"20170908","outDate":null,"id":4},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]}] 
DEBUG [2017-09-08 09:21:05,091][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170909, send json:  
DEBUG [2017-09-08 09:21:05,103][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:21:05,110][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170903, send json:  
DEBUG [2017-09-08 09:21:05,119][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:21:05,127][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170904, send json:  
DEBUG [2017-09-08 09:21:05,134][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:21:05,139][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170905, send json:  
DEBUG [2017-09-08 09:21:05,149][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:21:05,154][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170906, send json:  
DEBUG [2017-09-08 09:21:05,165][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:21:05,171][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170907, send json:  
DEBUG [2017-09-08 09:21:05,178][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:21:05,184][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170908, send json:  
DEBUG [2017-09-08 09:21:05,198][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]},{"id":4,"title":"123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"所有人","password":null,"corp":"","role":"user","status":null,"inDate":"20170908","outDate":null,"id":4},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]}] 
DEBUG [2017-09-08 09:21:05,203][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170909, send json:  
DEBUG [2017-09-08 09:21:05,213][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:21:05,221][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170903, send json:  
DEBUG [2017-09-08 09:21:05,232][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:21:05,237][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170904, send json:  
DEBUG [2017-09-08 09:21:05,246][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:21:05,250][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170905, send json:  
DEBUG [2017-09-08 09:21:05,259][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:21:05,265][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170906, send json:  
DEBUG [2017-09-08 09:21:05,273][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:21:05,277][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170907, send json:  
DEBUG [2017-09-08 09:21:05,288][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:21:05,294][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170908, send json:  
DEBUG [2017-09-08 09:21:05,307][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]},{"id":4,"title":"123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"所有人","password":null,"corp":"","role":"user","status":null,"inDate":"20170908","outDate":null,"id":4},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]}] 
DEBUG [2017-09-08 09:21:05,312][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/123123/20170909, send json:  
DEBUG [2017-09-08 09:21:05,320][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:21:05,361][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/list/123123, send json:  
DEBUG [2017-09-08 09:21:05,377][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]}] 
DEBUG [2017-09-08 09:21:05,416][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/requirement/list/123123, send json:  
DEBUG [2017-09-08 09:21:05,433][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:21:05,556][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/requirement/listBusiUsers, send json:  
DEBUG [2017-09-08 09:21:05,570][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:21:05,595][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/workOff/list, send json:  
DEBUG [2017-09-08 09:21:05,605][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-08 09:21:05,648][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/env/list, send json:  
DEBUG [2017-09-08 09:21:05,656][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":1,"system":"123123","type":"开发环境","serverType":"应用服务器","address":"123123","users":"123123","remark":"123123"}] 
DEBUG [2017-09-08 09:21:05,695][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/note/list, send json:  
DEBUG [2017-09-08 09:21:05,726][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":125,"name":"222","directory":true,"parent":null,"childrens":[{"id":126,"name":"qe123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><pre style=\"background-color:#2b2b2b;color:#a9b7c6;font-family:'Consolas';font-size:9.0pt;\"><span style=\"color:#cc7832;\">package </span>com.liuqi.tool.todo.ui<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.exceptions.TodoException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.model.User<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.Cache<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.ConfigProxy<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.application.Application<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.fxml.FXMLLoader<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Parent<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Scene<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.Tab<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.TabPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.layout.BorderPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Screen<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Stage<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.StageStyle<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.Logger<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.LoggerFactory<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>java.awt.geom.Rectangle2D<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.io.IOException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Iterator<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.List<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Optional<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">public class </span>Main <span style=\"color:#cc7832;\">extends </span>Application {<br>    <span style=\"color:#cc7832;\">private static </span>Logger <span style=\"color:#9876aa;font-style:italic;\">logger </span>= LoggerFactory.<span style=\"font-style:italic;\">getLogger</span>(Main.<span style=\"color:#cc7832;\">class</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">    </span><span style=\"color:#bbb529;\">@Override<br></span><span style=\"color:#bbb529;\">    </span><span style=\"color:#cc7832;\">public void </span><span style=\"color:#ffc66d;\">start</span>(Stage primaryStage) <span style=\"color:#cc7832;\">throws </span>Exception{<br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">检查是否保存用户名<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>String userName = ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.getSavedName()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>List&lt;User&gt; userList = Cache.<span style=\"font-style:italic;\">getUserList</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>== userList) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"No user exists, create an user first!\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            return;<br></span><span style=\"color:#cc7832;\">        </span>}<br><br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">根据保存的用户名查找用户<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>User findUser = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>!= userName &amp;&amp; !<span style=\"color:#6a8759;\">\"\"</span>.equals(userName)) {<br>            <span style=\"color:#cc7832;\">for </span>(User user : userList) {<br>                <span style=\"color:#cc7832;\">if </span>(userName.equals(user.getName()) || userName.equals(user.getId())) {<br>                    findUser = user<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    break;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }<br><br>        <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>== findUser) {<br>            <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">未找到用户，进行登录<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>LoginForm form = LoginForm.<span style=\"font-style:italic;\">getInstance</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>Optional&lt;User&gt; result = form.showAndWait()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>result.ifPresent(user -&gt; {<br>                <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>!= user) {<br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户与密码<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    try </span>{<br>                        ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.saveLoginInfo(loginUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>} <span style=\"color:#cc7832;\">catch </span>(TodoException e) {<br>                        <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Save login user info faield!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>}<br><br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>showMainView(<span style=\"color:#b389c5;\">primaryStage</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            })<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">else </span>{<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.info(<span style=\"color:#6a8759;\">\"Get saved user info succeeded, username: \" </span>+ findUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户信息<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>Cache.<span style=\"font-style:italic;\">setLoginUser</span>(findUser)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">找到用户，直接显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>showMainView(primaryStage)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>    }<br><br>    <span style=\"color:#cc7832;\">private void </span><span style=\"color:#ffc66d;\">showMainView</span>(Stage primaryStage) {<br>        BorderPane root = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        try </span>{<br>            root = FXMLLoader.<span style=\"font-style:italic;\">load</span>(getClass().getResource(<span style=\"color:#6a8759;\">\"sample.fxml\"</span>))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">catch </span>(IOException e) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Load fxml file failed!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>System.<span style=\"font-style:italic;\">exit</span>(<span style=\"color:#6897bb;\">0</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>        primaryStage.setTitle(<span style=\"color:#6a8759;\">\"</span><span style=\"color:#6a8759;font-family:'宋体';\">项目管理</span><span style=\"color:#6a8759;\">\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setScene(<span style=\"color:#cc7832;\">new </span>Scene(root))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setMaximized(<span style=\"color:#cc7832;\">true</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>TabPane tabPane = (TabPane) root.getCenter()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>Iterator&lt;Tab&gt; it = tabPane.getTabs().iterator()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        while </span>(it.hasNext()) {<br>            Tab tab = it.next()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"todo\"</span>.equals(tab.getId()) || <span style=\"color:#6a8759;\">\"requirement\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">continue;<br></span><span style=\"color:#cc7832;\">            </span>}<br><br>            User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"myCalendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()<br>                        || !ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.<span style=\"background-color:#344134;\">showMyCalendar</span>()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"calendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.showCalendar()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"userManager\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(loginUser.isNormalUser()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"env\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"note\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }     <br><br><br><span style=\"color:#808080;\">//        primaryStage.initStyle(StageStyle.UNDECORATED);<br></span><span style=\"color:#808080;\">//        javafx.geometry.Rectangle2D bounds = Screen.getPrimary().getVisualBounds();<br></span><span style=\"color:#808080;\">//        primaryStage.setX(bounds.getMinX());<br></span><span style=\"color:#808080;\">//        primaryStage.setY(bounds.getMinY());<br></span><span style=\"color:#808080;\">//        primaryStage.setWidth(bounds.getWidth());<br></span><span style=\"color:#808080;\">//        primaryStage.setHeight(bounds.getHeight());<br></span><span style=\"color:#808080;\"><br></span><span style=\"color:#808080;\">        </span>primaryStage.initStyle(StageStyle.<span style=\"color:#9876aa;font-style:italic;\">UNIFIED</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>root.getStylesheets().add(<span style=\"color:#6a8759;\">\"/main.css\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>primaryStage.show()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br><br><br>    <span style=\"color:#cc7832;\">public static void </span><span style=\"color:#ffc66d;\">main</span>(String[] args) {<br>        <span style=\"font-style:italic;\">launch</span>(args)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br>}<br></pre></body></html>","createTime":"2017-08-26 22:53:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":127,"name":"123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">1231123123123123123a &nbsp; a a &nbsp;斯塔大柳塔</font></p></body></html>","createTime":"2017-08-26 23:00:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":128,"name":"222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p>a<font face=\"Segoe UI\">斯塔克格勃工工</font></p></body></html>","createTime":"2017-08-26 23:00:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":6,"fileName":"1.doc","savedFileName":null,"noteId":128}]},{"id":129,"name":"12312312322222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">adfasdfsadf1111 &nbsp; &nbsp; adfad asd asdfasd asdf asd as asdfadsf a adasdfa dsaf asdasd fa工</font></p></body></html>","createTime":"2017-08-26 23:00:48","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":8,"fileName":"未解.docx","savedFileName":"3f042eed-40a5-4bf7-a4af-cd252dd3eed0..docx","noteId":129}]},{"id":130,"name":"123123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">ssdfsdf1212312311111aaaa</font></p></body></html>","createTime":"2017-08-26 23:00:56","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":132,"name":"2222222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">222222</font></p></body></html>","createTime":"2017-08-29 11:14:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":164,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123123</font></p></body></html>","createTime":"2017-08-30 09:25:14","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":165,"name":"aaaaaaa","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">aaaaaaaadfadsf asdf</font></p></body></html>","createTime":"2017-08-30 09:25:27","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":167,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123</font></p></body></html>","createTime":"2017-09-04 11:02:02","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]}],"content":"","createTime":"2017-08-26 22:53:07","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":126,"name":"qe123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><pre style=\"background-color:#2b2b2b;color:#a9b7c6;font-family:'Consolas';font-size:9.0pt;\"><span style=\"color:#cc7832;\">package </span>com.liuqi.tool.todo.ui<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.exceptions.TodoException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.model.User<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.Cache<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.ConfigProxy<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.application.Application<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.fxml.FXMLLoader<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Parent<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Scene<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.Tab<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.TabPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.layout.BorderPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Screen<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Stage<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.StageStyle<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.Logger<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.LoggerFactory<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>java.awt.geom.Rectangle2D<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.io.IOException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Iterator<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.List<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Optional<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">public class </span>Main <span style=\"color:#cc7832;\">extends </span>Application {<br>    <span style=\"color:#cc7832;\">private static </span>Logger <span style=\"color:#9876aa;font-style:italic;\">logger </span>= LoggerFactory.<span style=\"font-style:italic;\">getLogger</span>(Main.<span style=\"color:#cc7832;\">class</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">    </span><span style=\"color:#bbb529;\">@Override<br></span><span style=\"color:#bbb529;\">    </span><span style=\"color:#cc7832;\">public void </span><span style=\"color:#ffc66d;\">start</span>(Stage primaryStage) <span style=\"color:#cc7832;\">throws </span>Exception{<br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">检查是否保存用户名<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>String userName = ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.getSavedName()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>List&lt;User&gt; userList = Cache.<span style=\"font-style:italic;\">getUserList</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>== userList) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"No user exists, create an user first!\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            return;<br></span><span style=\"color:#cc7832;\">        </span>}<br><br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">根据保存的用户名查找用户<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>User findUser = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>!= userName &amp;&amp; !<span style=\"color:#6a8759;\">\"\"</span>.equals(userName)) {<br>            <span style=\"color:#cc7832;\">for </span>(User user : userList) {<br>                <span style=\"color:#cc7832;\">if </span>(userName.equals(user.getName()) || userName.equals(user.getId())) {<br>                    findUser = user<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    break;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }<br><br>        <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>== findUser) {<br>            <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">未找到用户，进行登录<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>LoginForm form = LoginForm.<span style=\"font-style:italic;\">getInstance</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>Optional&lt;User&gt; result = form.showAndWait()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>result.ifPresent(user -&gt; {<br>                <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>!= user) {<br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户与密码<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    try </span>{<br>                        ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.saveLoginInfo(loginUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>} <span style=\"color:#cc7832;\">catch </span>(TodoException e) {<br>                        <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Save login user info faield!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>}<br><br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>showMainView(<span style=\"color:#b389c5;\">primaryStage</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            })<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">else </span>{<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.info(<span style=\"color:#6a8759;\">\"Get saved user info succeeded, username: \" </span>+ findUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户信息<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>Cache.<span style=\"font-style:italic;\">setLoginUser</span>(findUser)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">找到用户，直接显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>showMainView(primaryStage)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>    }<br><br>    <span style=\"color:#cc7832;\">private void </span><span style=\"color:#ffc66d;\">showMainView</span>(Stage primaryStage) {<br>        BorderPane root = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        try </span>{<br>            root = FXMLLoader.<span style=\"font-style:italic;\">load</span>(getClass().getResource(<span style=\"color:#6a8759;\">\"sample.fxml\"</span>))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">catch </span>(IOException e) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Load fxml file failed!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>System.<span style=\"font-style:italic;\">exit</span>(<span style=\"color:#6897bb;\">0</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>        primaryStage.setTitle(<span style=\"color:#6a8759;\">\"</span><span style=\"color:#6a8759;font-family:'宋体';\">项目管理</span><span style=\"color:#6a8759;\">\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setScene(<span style=\"color:#cc7832;\">new </span>Scene(root))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setMaximized(<span style=\"color:#cc7832;\">true</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>TabPane tabPane = (TabPane) root.getCenter()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>Iterator&lt;Tab&gt; it = tabPane.getTabs().iterator()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        while </span>(it.hasNext()) {<br>            Tab tab = it.next()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"todo\"</span>.equals(tab.getId()) || <span style=\"color:#6a8759;\">\"requirement\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">continue;<br></span><span style=\"color:#cc7832;\">            </span>}<br><br>            User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"myCalendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()<br>                        || !ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.<span style=\"background-color:#344134;\">showMyCalendar</span>()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"calendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.showCalendar()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"userManager\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(loginUser.isNormalUser()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"env\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"note\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }     <br><br><br><span style=\"color:#808080;\">//        primaryStage.initStyle(StageStyle.UNDECORATED);<br></span><span style=\"color:#808080;\">//        javafx.geometry.Rectangle2D bounds = Screen.getPrimary().getVisualBounds();<br></span><span style=\"color:#808080;\">//        primaryStage.setX(bounds.getMinX());<br></span><span style=\"color:#808080;\">//        primaryStage.setY(bounds.getMinY());<br></span><span style=\"color:#808080;\">//        primaryStage.setWidth(bounds.getWidth());<br></span><span style=\"color:#808080;\">//        primaryStage.setHeight(bounds.getHeight());<br></span><span style=\"color:#808080;\"><br></span><span style=\"color:#808080;\">        </span>primaryStage.initStyle(StageStyle.<span style=\"color:#9876aa;font-style:italic;\">UNIFIED</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>root.getStylesheets().add(<span style=\"color:#6a8759;\">\"/main.css\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>primaryStage.show()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br><br><br>    <span style=\"color:#cc7832;\">public static void </span><span style=\"color:#ffc66d;\">main</span>(String[] args) {<br>        <span style=\"font-style:italic;\">launch</span>(args)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br>}<br></pre></body></html>","createTime":"2017-08-26 22:53:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":127,"name":"123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">1231123123123123123a &nbsp; a a &nbsp;斯塔大柳塔</font></p></body></html>","createTime":"2017-08-26 23:00:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":128,"name":"222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p>a<font face=\"Segoe UI\">斯塔克格勃工工</font></p></body></html>","createTime":"2017-08-26 23:00:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":6,"fileName":"1.doc","savedFileName":null,"noteId":128}]},{"id":129,"name":"12312312322222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">adfasdfsadf1111 &nbsp; &nbsp; adfad asd asdfasd asdf asd as asdfadsf a adasdfa dsaf asdasd fa工</font></p></body></html>","createTime":"2017-08-26 23:00:48","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":8,"fileName":"未解.docx","savedFileName":"3f042eed-40a5-4bf7-a4af-cd252dd3eed0..docx","noteId":129}]},{"id":130,"name":"123123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">ssdfsdf1212312311111aaaa</font></p></body></html>","createTime":"2017-08-26 23:00:56","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":132,"name":"2222222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">222222</font></p></body></html>","createTime":"2017-08-29 11:14:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":164,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123123</font></p></body></html>","createTime":"2017-08-30 09:25:14","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":165,"name":"aaaaaaa","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">aaaaaaaadfadsf asdf</font></p></body></html>","createTime":"2017-08-30 09:25:27","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":167,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123</font></p></body></html>","createTime":"2017-09-04 11:02:02","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]}] 
DEBUG [2017-09-08 09:21:17,008][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/list/123123, send json:  
DEBUG [2017-09-08 09:21:17,026][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]}] 
DEBUG [2017-09-08 09:21:17,576][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/list/123123, send json:  
DEBUG [2017-09-08 09:21:17,586][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]}] 
DEBUG [2017-09-08 09:21:26,768][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/list/123123, send json:  
DEBUG [2017-09-08 09:21:26,779][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]}] 
DEBUG [2017-09-08 09:21:27,000][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/list/123123, send json:  
DEBUG [2017-09-08 09:21:27,012][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":2,"title":"123123123","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"123123","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":2},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"123123","parent":null,"children":[]},{"id":3,"title":"444444444444","status":false,"type":"需求开发","server":"周报","receiveDate":"20170908","user":"刘奇","dev":{"name":"宇信","password":null,"corp":"宇信","role":"user","status":null,"inDate":"20170908","outDate":null,"id":3},"planDate":"20170908","actualDate":null,"planOnlineDate":null,"actualOnlineDate":null,"requirementId":"无","content":"","parent":null,"children":[]}] 
