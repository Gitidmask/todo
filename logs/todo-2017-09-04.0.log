DEBUG [2017-09-03 18:44:14,936][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-03 18:44:16,863][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1}] 
INFO  [2017-09-03 18:44:17,750][] com.liuqi.tool.todo.ui.Main:69 - Get saved user info succeeded, username: 刘奇 
DEBUG [2017-09-03 18:44:18,891][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170903, send json:  
DEBUG [2017-09-03 18:44:19,073][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:19,158][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170904, send json:  
DEBUG [2017-09-03 18:44:19,178][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:19,187][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170905, send json:  
DEBUG [2017-09-03 18:44:19,210][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:19,219][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170906, send json:  
DEBUG [2017-09-03 18:44:19,240][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:19,253][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170907, send json:  
DEBUG [2017-09-03 18:44:19,273][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:19,282][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170908, send json:  
DEBUG [2017-09-03 18:44:19,313][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:19,321][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170909, send json:  
DEBUG [2017-09-03 18:44:19,337][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:19,345][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170903, send json:  
DEBUG [2017-09-03 18:44:19,367][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:19,374][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170904, send json:  
DEBUG [2017-09-03 18:44:19,400][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:19,408][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170905, send json:  
DEBUG [2017-09-03 18:44:19,424][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:19,435][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170906, send json:  
DEBUG [2017-09-03 18:44:19,450][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:19,456][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170907, send json:  
DEBUG [2017-09-03 18:44:19,469][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:19,474][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170908, send json:  
DEBUG [2017-09-03 18:44:19,487][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:19,492][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170909, send json:  
DEBUG [2017-09-03 18:44:19,508][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:19,523][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170903, send json:  
DEBUG [2017-09-03 18:44:19,544][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:19,553][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170904, send json:  
DEBUG [2017-09-03 18:44:19,573][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:19,581][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170905, send json:  
DEBUG [2017-09-03 18:44:19,595][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:19,602][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170906, send json:  
DEBUG [2017-09-03 18:44:19,623][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:19,630][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170907, send json:  
DEBUG [2017-09-03 18:44:19,643][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:19,649][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170908, send json:  
DEBUG [2017-09-03 18:44:19,662][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:19,668][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170909, send json:  
DEBUG [2017-09-03 18:44:19,681][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:19,738][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/unrequirement/list/刘奇, send json:  
DEBUG [2017-09-03 18:44:19,784][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:20,059][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/requirement/list/刘奇, send json:  
DEBUG [2017-09-03 18:44:20,090][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:20,382][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/requirement/listBusiUsers, send json:  
DEBUG [2017-09-03 18:44:20,400][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:20,410][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-03 18:44:20,422][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1}] 
DEBUG [2017-09-03 18:44:20,435][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-03 18:44:20,449][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1}] 
DEBUG [2017-09-03 18:44:20,453][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/user/workOff/list, send json:  
DEBUG [2017-09-03 18:44:20,478][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [] 
DEBUG [2017-09-03 18:44:20,553][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/env/list, send json:  
DEBUG [2017-09-03 18:44:20,607][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [{"id":1,"system":"123123","type":"开发环境","serverType":"应用服务器","address":"123123","users":"123123","remark":"123123"}] 
DEBUG [2017-09-03 18:44:20,674][] com.liuqi.tool.todo.util.Ajax:179 - Send post request, url: http://localhost/note/list, send json:  
DEBUG [2017-09-03 18:44:21,184][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: [{"id":125,"name":"222","directory":true,"parent":null,"childrens":[{"id":126,"name":"qe123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><pre style=\"background-color:#2b2b2b;color:#a9b7c6;font-family:'Consolas';font-size:9.0pt;\"><span style=\"color:#cc7832;\">package </span>com.liuqi.tool.todo.ui<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.exceptions.TodoException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.model.User<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.Cache<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.ConfigProxy<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.application.Application<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.fxml.FXMLLoader<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Parent<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Scene<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.Tab<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.TabPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.layout.BorderPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Screen<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Stage<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.StageStyle<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.Logger<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.LoggerFactory<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>java.awt.geom.Rectangle2D<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.io.IOException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Iterator<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.List<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Optional<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">public class </span>Main <span style=\"color:#cc7832;\">extends </span>Application {<br>    <span style=\"color:#cc7832;\">private static </span>Logger <span style=\"color:#9876aa;font-style:italic;\">logger </span>= LoggerFactory.<span style=\"font-style:italic;\">getLogger</span>(Main.<span style=\"color:#cc7832;\">class</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">    </span><span style=\"color:#bbb529;\">@Override<br></span><span style=\"color:#bbb529;\">    </span><span style=\"color:#cc7832;\">public void </span><span style=\"color:#ffc66d;\">start</span>(Stage primaryStage) <span style=\"color:#cc7832;\">throws </span>Exception{<br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">检查是否保存用户名<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>String userName = ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.getSavedName()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>List&lt;User&gt; userList = Cache.<span style=\"font-style:italic;\">getUserList</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>== userList) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"No user exists, create an user first!\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            return;<br></span><span style=\"color:#cc7832;\">        </span>}<br><br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">根据保存的用户名查找用户<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>User findUser = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>!= userName &amp;&amp; !<span style=\"color:#6a8759;\">\"\"</span>.equals(userName)) {<br>            <span style=\"color:#cc7832;\">for </span>(User user : userList) {<br>                <span style=\"color:#cc7832;\">if </span>(userName.equals(user.getName()) || userName.equals(user.getId())) {<br>                    findUser = user<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    break;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }<br><br>        <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>== findUser) {<br>            <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">未找到用户，进行登录<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>LoginForm form = LoginForm.<span style=\"font-style:italic;\">getInstance</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>Optional&lt;User&gt; result = form.showAndWait()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>result.ifPresent(user -&gt; {<br>                <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>!= user) {<br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户与密码<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    try </span>{<br>                        ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.saveLoginInfo(loginUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>} <span style=\"color:#cc7832;\">catch </span>(TodoException e) {<br>                        <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Save login user info faield!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>}<br><br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>showMainView(<span style=\"color:#b389c5;\">primaryStage</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            })<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">else </span>{<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.info(<span style=\"color:#6a8759;\">\"Get saved user info succeeded, username: \" </span>+ findUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户信息<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>Cache.<span style=\"font-style:italic;\">setLoginUser</span>(findUser)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">找到用户，直接显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>showMainView(primaryStage)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>    }<br><br>    <span style=\"color:#cc7832;\">private void </span><span style=\"color:#ffc66d;\">showMainView</span>(Stage primaryStage) {<br>        BorderPane root = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        try </span>{<br>            root = FXMLLoader.<span style=\"font-style:italic;\">load</span>(getClass().getResource(<span style=\"color:#6a8759;\">\"sample.fxml\"</span>))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">catch </span>(IOException e) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Load fxml file failed!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>System.<span style=\"font-style:italic;\">exit</span>(<span style=\"color:#6897bb;\">0</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>        primaryStage.setTitle(<span style=\"color:#6a8759;\">\"</span><span style=\"color:#6a8759;font-family:'宋体';\">项目管理</span><span style=\"color:#6a8759;\">\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setScene(<span style=\"color:#cc7832;\">new </span>Scene(root))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setMaximized(<span style=\"color:#cc7832;\">true</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>TabPane tabPane = (TabPane) root.getCenter()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>Iterator&lt;Tab&gt; it = tabPane.getTabs().iterator()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        while </span>(it.hasNext()) {<br>            Tab tab = it.next()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"todo\"</span>.equals(tab.getId()) || <span style=\"color:#6a8759;\">\"requirement\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">continue;<br></span><span style=\"color:#cc7832;\">            </span>}<br><br>            User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"myCalendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()<br>                        || !ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.<span style=\"background-color:#344134;\">showMyCalendar</span>()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"calendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.showCalendar()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"userManager\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(loginUser.isNormalUser()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"env\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"note\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }     <br><br><br><span style=\"color:#808080;\">//        primaryStage.initStyle(StageStyle.UNDECORATED);<br></span><span style=\"color:#808080;\">//        javafx.geometry.Rectangle2D bounds = Screen.getPrimary().getVisualBounds();<br></span><span style=\"color:#808080;\">//        primaryStage.setX(bounds.getMinX());<br></span><span style=\"color:#808080;\">//        primaryStage.setY(bounds.getMinY());<br></span><span style=\"color:#808080;\">//        primaryStage.setWidth(bounds.getWidth());<br></span><span style=\"color:#808080;\">//        primaryStage.setHeight(bounds.getHeight());<br></span><span style=\"color:#808080;\"><br></span><span style=\"color:#808080;\">        </span>primaryStage.initStyle(StageStyle.<span style=\"color:#9876aa;font-style:italic;\">UNIFIED</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>root.getStylesheets().add(<span style=\"color:#6a8759;\">\"/main.css\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>primaryStage.show()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br><br><br>    <span style=\"color:#cc7832;\">public static void </span><span style=\"color:#ffc66d;\">main</span>(String[] args) {<br>        <span style=\"font-style:italic;\">launch</span>(args)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br>}<br></pre></body></html>","createTime":"2017-08-26 22:53:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":127,"name":"123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">1231123123123123123a &nbsp; a a &nbsp;斯塔大柳塔</font></p></body></html>","createTime":"2017-08-26 23:00:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":128,"name":"222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p>a<font face=\"Segoe UI\">斯塔克格勃工工</font></p></body></html>","createTime":"2017-08-26 23:00:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":6,"fileName":"1.doc","noteId":128}]},{"id":129,"name":"12312312322222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">adfasdfsadf1111 &nbsp; &nbsp; adfad asd asdfasd asdf asd as asdfadsf a adasdfa dsaf asdasd fa工</font></p></body></html>","createTime":"2017-08-26 23:00:48","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":5,"fileName":"222222222.doc","noteId":129}]},{"id":130,"name":"123123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">ssdfsdf1212312311111aaaa</font></p></body></html>","createTime":"2017-08-26 23:00:56","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":132,"name":"2222222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">222222</font></p></body></html>","createTime":"2017-08-29 11:14:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":164,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123123</font></p></body></html>","createTime":"2017-08-30 09:25:14","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":165,"name":"aaaaaaa","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">aaaaaaaadfadsf asdf</font></p></body></html>","createTime":"2017-08-30 09:25:27","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]}],"content":"","createTime":"2017-08-26 22:53:07","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":126,"name":"qe123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><pre style=\"background-color:#2b2b2b;color:#a9b7c6;font-family:'Consolas';font-size:9.0pt;\"><span style=\"color:#cc7832;\">package </span>com.liuqi.tool.todo.ui<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.exceptions.TodoException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.model.User<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.Cache<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.ConfigProxy<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.application.Application<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.fxml.FXMLLoader<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Parent<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Scene<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.Tab<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.TabPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.layout.BorderPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Screen<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Stage<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.StageStyle<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.Logger<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.LoggerFactory<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>java.awt.geom.Rectangle2D<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.io.IOException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Iterator<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.List<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Optional<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">public class </span>Main <span style=\"color:#cc7832;\">extends </span>Application {<br>    <span style=\"color:#cc7832;\">private static </span>Logger <span style=\"color:#9876aa;font-style:italic;\">logger </span>= LoggerFactory.<span style=\"font-style:italic;\">getLogger</span>(Main.<span style=\"color:#cc7832;\">class</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">    </span><span style=\"color:#bbb529;\">@Override<br></span><span style=\"color:#bbb529;\">    </span><span style=\"color:#cc7832;\">public void </span><span style=\"color:#ffc66d;\">start</span>(Stage primaryStage) <span style=\"color:#cc7832;\">throws </span>Exception{<br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">检查是否保存用户名<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>String userName = ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.getSavedName()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>List&lt;User&gt; userList = Cache.<span style=\"font-style:italic;\">getUserList</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>== userList) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"No user exists, create an user first!\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            return;<br></span><span style=\"color:#cc7832;\">        </span>}<br><br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">根据保存的用户名查找用户<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>User findUser = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>!= userName &amp;&amp; !<span style=\"color:#6a8759;\">\"\"</span>.equals(userName)) {<br>            <span style=\"color:#cc7832;\">for </span>(User user : userList) {<br>                <span style=\"color:#cc7832;\">if </span>(userName.equals(user.getName()) || userName.equals(user.getId())) {<br>                    findUser = user<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    break;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }<br><br>        <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>== findUser) {<br>            <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">未找到用户，进行登录<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>LoginForm form = LoginForm.<span style=\"font-style:italic;\">getInstance</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>Optional&lt;User&gt; result = form.showAndWait()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>result.ifPresent(user -&gt; {<br>                <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>!= user) {<br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户与密码<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    try </span>{<br>                        ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.saveLoginInfo(loginUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>} <span style=\"color:#cc7832;\">catch </span>(TodoException e) {<br>                        <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Save login user info faield!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>}<br><br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>showMainView(<span style=\"color:#b389c5;\">primaryStage</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            })<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">else </span>{<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.info(<span style=\"color:#6a8759;\">\"Get saved user info succeeded, username: \" </span>+ findUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户信息<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>Cache.<span style=\"font-style:italic;\">setLoginUser</span>(findUser)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">找到用户，直接显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>showMainView(primaryStage)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>    }<br><br>    <span style=\"color:#cc7832;\">private void </span><span style=\"color:#ffc66d;\">showMainView</span>(Stage primaryStage) {<br>        BorderPane root = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        try </span>{<br>            root = FXMLLoader.<span style=\"font-style:italic;\">load</span>(getClass().getResource(<span style=\"color:#6a8759;\">\"sample.fxml\"</span>))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">catch </span>(IOException e) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Load fxml file failed!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>System.<span style=\"font-style:italic;\">exit</span>(<span style=\"color:#6897bb;\">0</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>        primaryStage.setTitle(<span style=\"color:#6a8759;\">\"</span><span style=\"color:#6a8759;font-family:'宋体';\">项目管理</span><span style=\"color:#6a8759;\">\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setScene(<span style=\"color:#cc7832;\">new </span>Scene(root))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setMaximized(<span style=\"color:#cc7832;\">true</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>TabPane tabPane = (TabPane) root.getCenter()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>Iterator&lt;Tab&gt; it = tabPane.getTabs().iterator()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        while </span>(it.hasNext()) {<br>            Tab tab = it.next()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"todo\"</span>.equals(tab.getId()) || <span style=\"color:#6a8759;\">\"requirement\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">continue;<br></span><span style=\"color:#cc7832;\">            </span>}<br><br>            User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"myCalendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()<br>                        || !ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.<span style=\"background-color:#344134;\">showMyCalendar</span>()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"calendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.showCalendar()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"userManager\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(loginUser.isNormalUser()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"env\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"note\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }     <br><br><br><span style=\"color:#808080;\">//        primaryStage.initStyle(StageStyle.UNDECORATED);<br></span><span style=\"color:#808080;\">//        javafx.geometry.Rectangle2D bounds = Screen.getPrimary().getVisualBounds();<br></span><span style=\"color:#808080;\">//        primaryStage.setX(bounds.getMinX());<br></span><span style=\"color:#808080;\">//        primaryStage.setY(bounds.getMinY());<br></span><span style=\"color:#808080;\">//        primaryStage.setWidth(bounds.getWidth());<br></span><span style=\"color:#808080;\">//        primaryStage.setHeight(bounds.getHeight());<br></span><span style=\"color:#808080;\"><br></span><span style=\"color:#808080;\">        </span>primaryStage.initStyle(StageStyle.<span style=\"color:#9876aa;font-style:italic;\">UNIFIED</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>root.getStylesheets().add(<span style=\"color:#6a8759;\">\"/main.css\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>primaryStage.show()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br><br><br>    <span style=\"color:#cc7832;\">public static void </span><span style=\"color:#ffc66d;\">main</span>(String[] args) {<br>        <span style=\"font-style:italic;\">launch</span>(args)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br>}<br></pre></body></html>","createTime":"2017-08-26 22:53:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":127,"name":"123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">1231123123123123123a &nbsp; a a &nbsp;斯塔大柳塔</font></p></body></html>","createTime":"2017-08-26 23:00:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":128,"name":"222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p>a<font face=\"Segoe UI\">斯塔克格勃工工</font></p></body></html>","createTime":"2017-08-26 23:00:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":6,"fileName":"1.doc","noteId":128}]},{"id":129,"name":"12312312322222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">adfasdfsadf1111 &nbsp; &nbsp; adfad asd asdfasd asdf asd as asdfadsf a adasdfa dsaf asdasd fa工</font></p></body></html>","createTime":"2017-08-26 23:00:48","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":5,"fileName":"222222222.doc","noteId":129}]},{"id":130,"name":"123123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">ssdfsdf1212312311111aaaa</font></p></body></html>","createTime":"2017-08-26 23:00:56","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":132,"name":"2222222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">222222</font></p></body></html>","createTime":"2017-08-29 11:14:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":164,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123123</font></p></body></html>","createTime":"2017-08-30 09:25:14","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":165,"name":"aaaaaaa","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">aaaaaaaadfadsf asdf</font></p></body></html>","createTime":"2017-08-30 09:25:27","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]}] 
ERROR [2017-09-03 18:44:44,962][] com.liuqi.tool.todo.ui.note.EditorFileView:87 - Upload file failed! 
com.liuqi.learn.exceptions.TodoException: Could not parse multipart servlet request; nested exception is java.io.IOException: The temporary upload location [C:\Users\icaru\AppData\Local\Temp\tomcat.3781771727862990628.80\work\Tomcat\localhost\ROOT] is not valid
	at com.liuqi.tool.todo.util.Ajax.getResponseJsonData(Ajax.java:279)
	at com.liuqi.tool.todo.util.Ajax.uploadFile(Ajax.java:166)
	at com.liuqi.tool.todo.util.AjaxProxy.uploadFile(AjaxProxy.java:69)
	at com.liuqi.tool.todo.ui.note.EditorFileView.addFile(EditorFileView.java:85)
	at com.liuqi.tool.todo.ui.note.EditorFileView.lambda$new$0(EditorFileView.java:45)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Node.fireEvent(Node.java:8411)
	at javafx.scene.control.Button.fire(Button.java:185)
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:182)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:96)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:89)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:380)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:294)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$354(GlassViewEventHandler.java:416)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:415)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Thread.java:745)
DEBUG [2017-09-03 18:45:13,987][] com.liuqi.tool.todo.util.Ajax:287 - Get response json:  
DEBUG [2017-09-03 23:16:08,404][] com.liuqi.tool.todo.util.Ajax:287 - Get response json:  
DEBUG [2017-09-04 08:42:59,352][] com.liuqi.tool.todo.util.Ajax:287 - Get response json:  
DEBUG [2017-09-04 08:46:35,472][] com.liuqi.tool.todo.util.Ajax:287 - Get response json:  
DEBUG [2017-09-04 08:49:39,071][] com.liuqi.tool.todo.util.Ajax:287 - Get response json:  
DEBUG [2017-09-04 08:51:14,387][] com.liuqi.tool.todo.util.Ajax:287 - Get response json: ??.docx 
DEBUG [2017-09-04 08:56:28,972][] com.liuqi.tool.todo.util.Ajax:287 - Get response json:  
DEBUG [2017-09-04 09:26:23,565][] com.liuqi.tool.todo.util.Ajax:287 - Get response json:  
DEBUG [2017-09-04 09:30:50,670][] com.liuqi.tool.todo.util.Ajax:287 - Get response json:  
DEBUG [2017-09-04 09:33:13,714][] com.liuqi.tool.todo.util.Ajax:287 - Get response json:  
DEBUG [2017-09-04 11:00:17,876][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-04 11:00:19,813][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1}] 
INFO  [2017-09-04 11:00:20,508][] com.liuqi.tool.todo.ui.Main:69 - Get saved user info succeeded, username: 刘奇 
DEBUG [2017-09-04 11:00:21,649][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170903, send json:  
DEBUG [2017-09-04 11:00:21,764][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:21,887][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170904, send json:  
DEBUG [2017-09-04 11:00:21,944][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:21,956][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170905, send json:  
DEBUG [2017-09-04 11:00:21,975][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:21,985][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170906, send json:  
DEBUG [2017-09-04 11:00:22,010][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:22,019][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170907, send json:  
DEBUG [2017-09-04 11:00:22,038][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:22,052][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170908, send json:  
DEBUG [2017-09-04 11:00:22,091][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:22,104][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170909, send json:  
DEBUG [2017-09-04 11:00:22,124][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:22,131][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170903, send json:  
DEBUG [2017-09-04 11:00:22,154][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:22,165][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170904, send json:  
DEBUG [2017-09-04 11:00:22,182][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:22,189][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170905, send json:  
DEBUG [2017-09-04 11:00:22,208][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:22,216][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170906, send json:  
DEBUG [2017-09-04 11:00:22,246][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:22,252][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170907, send json:  
DEBUG [2017-09-04 11:00:22,269][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:22,275][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170908, send json:  
DEBUG [2017-09-04 11:00:22,289][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:22,306][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170909, send json:  
DEBUG [2017-09-04 11:00:22,392][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:22,410][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170903, send json:  
DEBUG [2017-09-04 11:00:22,477][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:22,485][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170904, send json:  
DEBUG [2017-09-04 11:00:22,525][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:22,531][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170905, send json:  
DEBUG [2017-09-04 11:00:22,546][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:22,552][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170906, send json:  
DEBUG [2017-09-04 11:00:22,567][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:22,574][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170907, send json:  
DEBUG [2017-09-04 11:00:22,587][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:22,593][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170908, send json:  
DEBUG [2017-09-04 11:00:22,609][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:22,615][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170909, send json:  
DEBUG [2017-09-04 11:00:22,627][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:22,687][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/list/刘奇, send json:  
DEBUG [2017-09-04 11:00:22,714][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:22,768][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/requirement/list/刘奇, send json:  
DEBUG [2017-09-04 11:00:22,791][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:22,991][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/requirement/listBusiUsers, send json:  
DEBUG [2017-09-04 11:00:23,006][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:23,016][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-04 11:00:23,035][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1}] 
DEBUG [2017-09-04 11:00:23,060][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-04 11:00:23,078][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1}] 
DEBUG [2017-09-04 11:00:23,083][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/workOff/list, send json:  
DEBUG [2017-09-04 11:00:23,102][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:00:23,163][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/env/list, send json:  
DEBUG [2017-09-04 11:00:23,194][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":1,"system":"123123","type":"开发环境","serverType":"应用服务器","address":"123123","users":"123123","remark":"123123"}] 
DEBUG [2017-09-04 11:00:23,266][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/note/list, send json:  
DEBUG [2017-09-04 11:00:23,792][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":125,"name":"222","directory":true,"parent":null,"childrens":[{"id":126,"name":"qe123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><pre style=\"background-color:#2b2b2b;color:#a9b7c6;font-family:'Consolas';font-size:9.0pt;\"><span style=\"color:#cc7832;\">package </span>com.liuqi.tool.todo.ui<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.exceptions.TodoException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.model.User<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.Cache<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.ConfigProxy<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.application.Application<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.fxml.FXMLLoader<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Parent<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Scene<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.Tab<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.TabPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.layout.BorderPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Screen<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Stage<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.StageStyle<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.Logger<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.LoggerFactory<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>java.awt.geom.Rectangle2D<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.io.IOException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Iterator<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.List<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Optional<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">public class </span>Main <span style=\"color:#cc7832;\">extends </span>Application {<br>    <span style=\"color:#cc7832;\">private static </span>Logger <span style=\"color:#9876aa;font-style:italic;\">logger </span>= LoggerFactory.<span style=\"font-style:italic;\">getLogger</span>(Main.<span style=\"color:#cc7832;\">class</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">    </span><span style=\"color:#bbb529;\">@Override<br></span><span style=\"color:#bbb529;\">    </span><span style=\"color:#cc7832;\">public void </span><span style=\"color:#ffc66d;\">start</span>(Stage primaryStage) <span style=\"color:#cc7832;\">throws </span>Exception{<br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">检查是否保存用户名<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>String userName = ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.getSavedName()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>List&lt;User&gt; userList = Cache.<span style=\"font-style:italic;\">getUserList</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>== userList) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"No user exists, create an user first!\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            return;<br></span><span style=\"color:#cc7832;\">        </span>}<br><br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">根据保存的用户名查找用户<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>User findUser = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>!= userName &amp;&amp; !<span style=\"color:#6a8759;\">\"\"</span>.equals(userName)) {<br>            <span style=\"color:#cc7832;\">for </span>(User user : userList) {<br>                <span style=\"color:#cc7832;\">if </span>(userName.equals(user.getName()) || userName.equals(user.getId())) {<br>                    findUser = user<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    break;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }<br><br>        <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>== findUser) {<br>            <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">未找到用户，进行登录<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>LoginForm form = LoginForm.<span style=\"font-style:italic;\">getInstance</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>Optional&lt;User&gt; result = form.showAndWait()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>result.ifPresent(user -&gt; {<br>                <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>!= user) {<br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户与密码<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    try </span>{<br>                        ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.saveLoginInfo(loginUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>} <span style=\"color:#cc7832;\">catch </span>(TodoException e) {<br>                        <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Save login user info faield!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>}<br><br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>showMainView(<span style=\"color:#b389c5;\">primaryStage</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            })<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">else </span>{<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.info(<span style=\"color:#6a8759;\">\"Get saved user info succeeded, username: \" </span>+ findUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户信息<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>Cache.<span style=\"font-style:italic;\">setLoginUser</span>(findUser)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">找到用户，直接显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>showMainView(primaryStage)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>    }<br><br>    <span style=\"color:#cc7832;\">private void </span><span style=\"color:#ffc66d;\">showMainView</span>(Stage primaryStage) {<br>        BorderPane root = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        try </span>{<br>            root = FXMLLoader.<span style=\"font-style:italic;\">load</span>(getClass().getResource(<span style=\"color:#6a8759;\">\"sample.fxml\"</span>))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">catch </span>(IOException e) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Load fxml file failed!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>System.<span style=\"font-style:italic;\">exit</span>(<span style=\"color:#6897bb;\">0</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>        primaryStage.setTitle(<span style=\"color:#6a8759;\">\"</span><span style=\"color:#6a8759;font-family:'宋体';\">项目管理</span><span style=\"color:#6a8759;\">\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setScene(<span style=\"color:#cc7832;\">new </span>Scene(root))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setMaximized(<span style=\"color:#cc7832;\">true</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>TabPane tabPane = (TabPane) root.getCenter()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>Iterator&lt;Tab&gt; it = tabPane.getTabs().iterator()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        while </span>(it.hasNext()) {<br>            Tab tab = it.next()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"todo\"</span>.equals(tab.getId()) || <span style=\"color:#6a8759;\">\"requirement\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">continue;<br></span><span style=\"color:#cc7832;\">            </span>}<br><br>            User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"myCalendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()<br>                        || !ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.<span style=\"background-color:#344134;\">showMyCalendar</span>()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"calendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.showCalendar()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"userManager\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(loginUser.isNormalUser()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"env\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"note\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }     <br><br><br><span style=\"color:#808080;\">//        primaryStage.initStyle(StageStyle.UNDECORATED);<br></span><span style=\"color:#808080;\">//        javafx.geometry.Rectangle2D bounds = Screen.getPrimary().getVisualBounds();<br></span><span style=\"color:#808080;\">//        primaryStage.setX(bounds.getMinX());<br></span><span style=\"color:#808080;\">//        primaryStage.setY(bounds.getMinY());<br></span><span style=\"color:#808080;\">//        primaryStage.setWidth(bounds.getWidth());<br></span><span style=\"color:#808080;\">//        primaryStage.setHeight(bounds.getHeight());<br></span><span style=\"color:#808080;\"><br></span><span style=\"color:#808080;\">        </span>primaryStage.initStyle(StageStyle.<span style=\"color:#9876aa;font-style:italic;\">UNIFIED</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>root.getStylesheets().add(<span style=\"color:#6a8759;\">\"/main.css\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>primaryStage.show()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br><br><br>    <span style=\"color:#cc7832;\">public static void </span><span style=\"color:#ffc66d;\">main</span>(String[] args) {<br>        <span style=\"font-style:italic;\">launch</span>(args)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br>}<br></pre></body></html>","createTime":"2017-08-26 22:53:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":127,"name":"123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">1231123123123123123a &nbsp; a a &nbsp;斯塔大柳塔</font></p></body></html>","createTime":"2017-08-26 23:00:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":128,"name":"222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p>a<font face=\"Segoe UI\">斯塔克格勃工工</font></p></body></html>","createTime":"2017-08-26 23:00:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":6,"fileName":"1.doc","savedFileName":null,"noteId":128}]},{"id":129,"name":"12312312322222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">adfasdfsadf1111 &nbsp; &nbsp; adfad asd asdfasd asdf asd as asdfadsf a adasdfa dsaf asdasd fa工</font></p></body></html>","createTime":"2017-08-26 23:00:48","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":5,"fileName":"222222222.doc","savedFileName":null,"noteId":129}]},{"id":130,"name":"123123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">ssdfsdf1212312311111aaaa</font></p></body></html>","createTime":"2017-08-26 23:00:56","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":132,"name":"2222222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">222222</font></p></body></html>","createTime":"2017-08-29 11:14:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":164,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123123</font></p></body></html>","createTime":"2017-08-30 09:25:14","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":165,"name":"aaaaaaa","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">aaaaaaaadfadsf asdf</font></p></body></html>","createTime":"2017-08-30 09:25:27","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]}],"content":"","createTime":"2017-08-26 22:53:07","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":126,"name":"qe123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><pre style=\"background-color:#2b2b2b;color:#a9b7c6;font-family:'Consolas';font-size:9.0pt;\"><span style=\"color:#cc7832;\">package </span>com.liuqi.tool.todo.ui<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.exceptions.TodoException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.model.User<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.Cache<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.ConfigProxy<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.application.Application<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.fxml.FXMLLoader<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Parent<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Scene<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.Tab<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.TabPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.layout.BorderPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Screen<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Stage<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.StageStyle<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.Logger<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.LoggerFactory<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>java.awt.geom.Rectangle2D<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.io.IOException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Iterator<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.List<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Optional<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">public class </span>Main <span style=\"color:#cc7832;\">extends </span>Application {<br>    <span style=\"color:#cc7832;\">private static </span>Logger <span style=\"color:#9876aa;font-style:italic;\">logger </span>= LoggerFactory.<span style=\"font-style:italic;\">getLogger</span>(Main.<span style=\"color:#cc7832;\">class</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">    </span><span style=\"color:#bbb529;\">@Override<br></span><span style=\"color:#bbb529;\">    </span><span style=\"color:#cc7832;\">public void </span><span style=\"color:#ffc66d;\">start</span>(Stage primaryStage) <span style=\"color:#cc7832;\">throws </span>Exception{<br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">检查是否保存用户名<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>String userName = ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.getSavedName()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>List&lt;User&gt; userList = Cache.<span style=\"font-style:italic;\">getUserList</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>== userList) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"No user exists, create an user first!\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            return;<br></span><span style=\"color:#cc7832;\">        </span>}<br><br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">根据保存的用户名查找用户<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>User findUser = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>!= userName &amp;&amp; !<span style=\"color:#6a8759;\">\"\"</span>.equals(userName)) {<br>            <span style=\"color:#cc7832;\">for </span>(User user : userList) {<br>                <span style=\"color:#cc7832;\">if </span>(userName.equals(user.getName()) || userName.equals(user.getId())) {<br>                    findUser = user<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    break;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }<br><br>        <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>== findUser) {<br>            <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">未找到用户，进行登录<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>LoginForm form = LoginForm.<span style=\"font-style:italic;\">getInstance</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>Optional&lt;User&gt; result = form.showAndWait()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>result.ifPresent(user -&gt; {<br>                <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>!= user) {<br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户与密码<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    try </span>{<br>                        ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.saveLoginInfo(loginUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>} <span style=\"color:#cc7832;\">catch </span>(TodoException e) {<br>                        <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Save login user info faield!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>}<br><br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>showMainView(<span style=\"color:#b389c5;\">primaryStage</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            })<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">else </span>{<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.info(<span style=\"color:#6a8759;\">\"Get saved user info succeeded, username: \" </span>+ findUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户信息<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>Cache.<span style=\"font-style:italic;\">setLoginUser</span>(findUser)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">找到用户，直接显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>showMainView(primaryStage)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>    }<br><br>    <span style=\"color:#cc7832;\">private void </span><span style=\"color:#ffc66d;\">showMainView</span>(Stage primaryStage) {<br>        BorderPane root = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        try </span>{<br>            root = FXMLLoader.<span style=\"font-style:italic;\">load</span>(getClass().getResource(<span style=\"color:#6a8759;\">\"sample.fxml\"</span>))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">catch </span>(IOException e) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Load fxml file failed!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>System.<span style=\"font-style:italic;\">exit</span>(<span style=\"color:#6897bb;\">0</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>        primaryStage.setTitle(<span style=\"color:#6a8759;\">\"</span><span style=\"color:#6a8759;font-family:'宋体';\">项目管理</span><span style=\"color:#6a8759;\">\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setScene(<span style=\"color:#cc7832;\">new </span>Scene(root))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setMaximized(<span style=\"color:#cc7832;\">true</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>TabPane tabPane = (TabPane) root.getCenter()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>Iterator&lt;Tab&gt; it = tabPane.getTabs().iterator()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        while </span>(it.hasNext()) {<br>            Tab tab = it.next()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"todo\"</span>.equals(tab.getId()) || <span style=\"color:#6a8759;\">\"requirement\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">continue;<br></span><span style=\"color:#cc7832;\">            </span>}<br><br>            User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"myCalendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()<br>                        || !ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.<span style=\"background-color:#344134;\">showMyCalendar</span>()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"calendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.showCalendar()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"userManager\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(loginUser.isNormalUser()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"env\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"note\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }     <br><br><br><span style=\"color:#808080;\">//        primaryStage.initStyle(StageStyle.UNDECORATED);<br></span><span style=\"color:#808080;\">//        javafx.geometry.Rectangle2D bounds = Screen.getPrimary().getVisualBounds();<br></span><span style=\"color:#808080;\">//        primaryStage.setX(bounds.getMinX());<br></span><span style=\"color:#808080;\">//        primaryStage.setY(bounds.getMinY());<br></span><span style=\"color:#808080;\">//        primaryStage.setWidth(bounds.getWidth());<br></span><span style=\"color:#808080;\">//        primaryStage.setHeight(bounds.getHeight());<br></span><span style=\"color:#808080;\"><br></span><span style=\"color:#808080;\">        </span>primaryStage.initStyle(StageStyle.<span style=\"color:#9876aa;font-style:italic;\">UNIFIED</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>root.getStylesheets().add(<span style=\"color:#6a8759;\">\"/main.css\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>primaryStage.show()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br><br><br>    <span style=\"color:#cc7832;\">public static void </span><span style=\"color:#ffc66d;\">main</span>(String[] args) {<br>        <span style=\"font-style:italic;\">launch</span>(args)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br>}<br></pre></body></html>","createTime":"2017-08-26 22:53:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":127,"name":"123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">1231123123123123123a &nbsp; a a &nbsp;斯塔大柳塔</font></p></body></html>","createTime":"2017-08-26 23:00:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":128,"name":"222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p>a<font face=\"Segoe UI\">斯塔克格勃工工</font></p></body></html>","createTime":"2017-08-26 23:00:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":6,"fileName":"1.doc","savedFileName":null,"noteId":128}]},{"id":129,"name":"12312312322222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">adfasdfsadf1111 &nbsp; &nbsp; adfad asd asdfasd asdf asd as asdfadsf a adasdfa dsaf asdasd fa工</font></p></body></html>","createTime":"2017-08-26 23:00:48","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":5,"fileName":"222222222.doc","savedFileName":null,"noteId":129}]},{"id":130,"name":"123123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">ssdfsdf1212312311111aaaa</font></p></body></html>","createTime":"2017-08-26 23:00:56","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":132,"name":"2222222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">222222</font></p></body></html>","createTime":"2017-08-29 11:14:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":164,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123123</font></p></body></html>","createTime":"2017-08-30 09:25:14","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":165,"name":"aaaaaaa","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">aaaaaaaadfadsf asdf</font></p></body></html>","createTime":"2017-08-30 09:25:27","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]}] 
DEBUG [2017-09-04 11:00:44,014][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: 8a0f0499-7699-435a-b660-aa70a1ad84d4..docx 
DEBUG [2017-09-04 11:00:46,845][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/note/deleteNoteFile, send json: {"id":5,"fileName":"222222222.doc","savedFileName":null,"noteId":129} 
DEBUG [2017-09-04 11:00:46,974][] com.liuqi.tool.todo.util.Ajax:290 - Get response json:  
DEBUG [2017-09-04 11:00:48,070][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/note/deleteNoteFile, send json: {"id":null,"fileName":"未解.docx","savedFileName":"8a0f0499-7699-435a-b660-aa70a1ad84d4..docx","noteId":null} 
DEBUG [2017-09-04 11:00:48,099][] com.liuqi.tool.todo.util.Ajax:290 - Get response json:  
DEBUG [2017-09-04 11:00:51,913][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: 3f042eed-40a5-4bf7-a4af-cd252dd3eed0..docx 
DEBUG [2017-09-04 11:00:53,571][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/note/save, send json: {"id":129,"name":"12312312322222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">adfasdfsadf1111 &nbsp; &nbsp; adfad asd asdfasd asdf asd as asdfadsf a adasdfa dsaf asdasd fa工</font></p></body></html>","createTime":"2017-08-26 23:00:48","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":null,"fileName":"未解.docx","savedFileName":"3f042eed-40a5-4bf7-a4af-cd252dd3eed0..docx","noteId":null}]} 
ERROR [2017-09-04 11:00:53,623][] com.liuqi.tool.todo.util.Ajax:285 - Get status and errorMessage values failed! 
org.json.JSONException: No value for status
	at org.json.JSONObject.get(JSONObject.java:355)
	at org.json.JSONObject.getString(JSONObject.java:515)
	at com.liuqi.tool.todo.util.Ajax.getResponseJsonData(Ajax.java:278)
	at com.liuqi.tool.todo.util.Ajax.internalPost(Ajax.java:187)
	at com.liuqi.tool.todo.util.Ajax.postForObject(Ajax.java:83)
	at com.liuqi.tool.todo.util.AjaxProxy.saveNote(AjaxProxy.java:125)
	at com.liuqi.tool.todo.ui.note.EditorView.save(EditorView.java:97)
	at com.liuqi.tool.todo.ui.note.EditorView.lambda$new$0(EditorView.java:65)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Node.fireEvent(Node.java:8411)
	at javafx.scene.control.Button.fire(Button.java:185)
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:182)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:96)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:89)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:380)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:294)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$354(GlassViewEventHandler.java:416)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:415)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Thread.java:745)
DEBUG [2017-09-04 11:00:53,624][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: {"id":129,"name":"12312312322222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">adfasdfsadf1111 &nbsp; &nbsp; adfad asd asdfasd asdf asd as asdfadsf a adasdfa dsaf asdasd fa工</font></p></body></html>","createTime":"2017-08-26 23:00:48","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":8,"fileName":"未解.docx","savedFileName":"3f042eed-40a5-4bf7-a4af-cd252dd3eed0..docx","noteId":null}]} 
DEBUG [2017-09-04 11:01:51,120][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/note/save, send json: {"id":null,"name":"","directory":false,"parent":125,"childrens":null,"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"></body></html>","createTime":"2017-09-04 11:01:51","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":null} 
ERROR [2017-09-04 11:01:51,159][] com.liuqi.tool.todo.util.Ajax:285 - Get status and errorMessage values failed! 
org.json.JSONException: No value for status
	at org.json.JSONObject.get(JSONObject.java:355)
	at org.json.JSONObject.getString(JSONObject.java:515)
	at com.liuqi.tool.todo.util.Ajax.getResponseJsonData(Ajax.java:278)
	at com.liuqi.tool.todo.util.Ajax.internalPost(Ajax.java:187)
	at com.liuqi.tool.todo.util.Ajax.postForObject(Ajax.java:83)
	at com.liuqi.tool.todo.util.AjaxProxy.saveNote(AjaxProxy.java:125)
	at com.liuqi.tool.todo.ui.note.EditorView.save(EditorView.java:97)
	at com.liuqi.tool.todo.ui.note.EditorView.lambda$new$0(EditorView.java:65)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Node.fireEvent(Node.java:8411)
	at javafx.scene.control.Button.fire(Button.java:185)
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:182)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:96)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:89)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:380)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:294)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$354(GlassViewEventHandler.java:416)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:415)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Thread.java:745)
DEBUG [2017-09-04 11:01:51,160][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: {"id":166,"name":"","directory":false,"parent":125,"childrens":null,"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"></body></html>","createTime":"2017-09-04 11:01:51","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":null} 
DEBUG [2017-09-04 11:02:02,095][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/note/save, send json: {"id":null,"name":"123123","directory":false,"parent":125,"childrens":null,"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123</font></p></body></html>","createTime":"2017-09-04 11:02:02","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":null} 
ERROR [2017-09-04 11:02:02,125][] com.liuqi.tool.todo.util.Ajax:285 - Get status and errorMessage values failed! 
org.json.JSONException: No value for status
	at org.json.JSONObject.get(JSONObject.java:355)
	at org.json.JSONObject.getString(JSONObject.java:515)
	at com.liuqi.tool.todo.util.Ajax.getResponseJsonData(Ajax.java:278)
	at com.liuqi.tool.todo.util.Ajax.internalPost(Ajax.java:187)
	at com.liuqi.tool.todo.util.Ajax.postForObject(Ajax.java:83)
	at com.liuqi.tool.todo.util.AjaxProxy.saveNote(AjaxProxy.java:125)
	at com.liuqi.tool.todo.ui.note.EditorView.save(EditorView.java:97)
	at com.liuqi.tool.todo.ui.note.EditorView.lambda$new$0(EditorView.java:65)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Node.fireEvent(Node.java:8411)
	at javafx.scene.control.Button.fire(Button.java:185)
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:182)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:96)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:89)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:380)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:294)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$354(GlassViewEventHandler.java:416)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:415)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Thread.java:745)
DEBUG [2017-09-04 11:02:02,126][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: {"id":167,"name":"123123","directory":false,"parent":125,"childrens":null,"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123</font></p></body></html>","createTime":"2017-09-04 11:02:02","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":null} 
DEBUG [2017-09-04 11:02:07,497][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/note/delete, send json: {"id":166,"name":"","directory":false,"parent":125,"childrens":null,"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"></body></html>","createTime":"2017-09-04 11:01:51","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":null} 
DEBUG [2017-09-04 11:02:07,516][] com.liuqi.tool.todo.util.Ajax:290 - Get response json:  
DEBUG [2017-09-04 11:04:10,686][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-04 11:04:11,657][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1}] 
INFO  [2017-09-04 11:04:12,110][] com.liuqi.tool.todo.ui.Main:69 - Get saved user info succeeded, username: 刘奇 
DEBUG [2017-09-04 11:04:12,775][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170903, send json:  
DEBUG [2017-09-04 11:04:12,814][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:12,890][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170904, send json:  
DEBUG [2017-09-04 11:04:12,920][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:12,929][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170905, send json:  
DEBUG [2017-09-04 11:04:12,944][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:12,953][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170906, send json:  
DEBUG [2017-09-04 11:04:12,976][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:12,988][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170907, send json:  
DEBUG [2017-09-04 11:04:13,015][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:13,028][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170908, send json:  
DEBUG [2017-09-04 11:04:13,044][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:13,055][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170909, send json:  
DEBUG [2017-09-04 11:04:13,070][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:13,077][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170903, send json:  
DEBUG [2017-09-04 11:04:13,091][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:13,100][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170904, send json:  
DEBUG [2017-09-04 11:04:13,113][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:13,121][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170905, send json:  
DEBUG [2017-09-04 11:04:13,133][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:13,140][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170906, send json:  
DEBUG [2017-09-04 11:04:13,153][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:13,160][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170907, send json:  
DEBUG [2017-09-04 11:04:13,172][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:13,179][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170908, send json:  
DEBUG [2017-09-04 11:04:13,192][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:13,200][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170909, send json:  
DEBUG [2017-09-04 11:04:13,212][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:13,223][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170903, send json:  
DEBUG [2017-09-04 11:04:13,233][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:13,239][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170904, send json:  
DEBUG [2017-09-04 11:04:13,248][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:13,254][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170905, send json:  
DEBUG [2017-09-04 11:04:13,265][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:13,270][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170906, send json:  
DEBUG [2017-09-04 11:04:13,281][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:13,285][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170907, send json:  
DEBUG [2017-09-04 11:04:13,298][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:13,303][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170908, send json:  
DEBUG [2017-09-04 11:04:13,314][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:13,324][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170909, send json:  
DEBUG [2017-09-04 11:04:13,356][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:13,423][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/list/刘奇, send json:  
DEBUG [2017-09-04 11:04:13,438][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:13,481][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/requirement/list/刘奇, send json:  
DEBUG [2017-09-04 11:04:13,499][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:13,728][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/requirement/listBusiUsers, send json:  
DEBUG [2017-09-04 11:04:13,740][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:13,750][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-04 11:04:13,762][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1}] 
DEBUG [2017-09-04 11:04:13,775][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-04 11:04:13,786][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1}] 
DEBUG [2017-09-04 11:04:13,791][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/workOff/list, send json:  
DEBUG [2017-09-04 11:04:13,808][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:04:13,868][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/env/list, send json:  
DEBUG [2017-09-04 11:04:13,880][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":1,"system":"123123","type":"开发环境","serverType":"应用服务器","address":"123123","users":"123123","remark":"123123"}] 
DEBUG [2017-09-04 11:04:13,952][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/note/list, send json:  
DEBUG [2017-09-04 11:04:14,070][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":125,"name":"222","directory":true,"parent":null,"childrens":[{"id":126,"name":"qe123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><pre style=\"background-color:#2b2b2b;color:#a9b7c6;font-family:'Consolas';font-size:9.0pt;\"><span style=\"color:#cc7832;\">package </span>com.liuqi.tool.todo.ui<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.exceptions.TodoException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.model.User<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.Cache<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.ConfigProxy<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.application.Application<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.fxml.FXMLLoader<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Parent<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Scene<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.Tab<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.TabPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.layout.BorderPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Screen<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Stage<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.StageStyle<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.Logger<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.LoggerFactory<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>java.awt.geom.Rectangle2D<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.io.IOException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Iterator<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.List<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Optional<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">public class </span>Main <span style=\"color:#cc7832;\">extends </span>Application {<br>    <span style=\"color:#cc7832;\">private static </span>Logger <span style=\"color:#9876aa;font-style:italic;\">logger </span>= LoggerFactory.<span style=\"font-style:italic;\">getLogger</span>(Main.<span style=\"color:#cc7832;\">class</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">    </span><span style=\"color:#bbb529;\">@Override<br></span><span style=\"color:#bbb529;\">    </span><span style=\"color:#cc7832;\">public void </span><span style=\"color:#ffc66d;\">start</span>(Stage primaryStage) <span style=\"color:#cc7832;\">throws </span>Exception{<br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">检查是否保存用户名<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>String userName = ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.getSavedName()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>List&lt;User&gt; userList = Cache.<span style=\"font-style:italic;\">getUserList</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>== userList) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"No user exists, create an user first!\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            return;<br></span><span style=\"color:#cc7832;\">        </span>}<br><br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">根据保存的用户名查找用户<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>User findUser = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>!= userName &amp;&amp; !<span style=\"color:#6a8759;\">\"\"</span>.equals(userName)) {<br>            <span style=\"color:#cc7832;\">for </span>(User user : userList) {<br>                <span style=\"color:#cc7832;\">if </span>(userName.equals(user.getName()) || userName.equals(user.getId())) {<br>                    findUser = user<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    break;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }<br><br>        <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>== findUser) {<br>            <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">未找到用户，进行登录<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>LoginForm form = LoginForm.<span style=\"font-style:italic;\">getInstance</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>Optional&lt;User&gt; result = form.showAndWait()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>result.ifPresent(user -&gt; {<br>                <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>!= user) {<br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户与密码<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    try </span>{<br>                        ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.saveLoginInfo(loginUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>} <span style=\"color:#cc7832;\">catch </span>(TodoException e) {<br>                        <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Save login user info faield!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>}<br><br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>showMainView(<span style=\"color:#b389c5;\">primaryStage</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            })<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">else </span>{<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.info(<span style=\"color:#6a8759;\">\"Get saved user info succeeded, username: \" </span>+ findUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户信息<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>Cache.<span style=\"font-style:italic;\">setLoginUser</span>(findUser)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">找到用户，直接显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>showMainView(primaryStage)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>    }<br><br>    <span style=\"color:#cc7832;\">private void </span><span style=\"color:#ffc66d;\">showMainView</span>(Stage primaryStage) {<br>        BorderPane root = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        try </span>{<br>            root = FXMLLoader.<span style=\"font-style:italic;\">load</span>(getClass().getResource(<span style=\"color:#6a8759;\">\"sample.fxml\"</span>))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">catch </span>(IOException e) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Load fxml file failed!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>System.<span style=\"font-style:italic;\">exit</span>(<span style=\"color:#6897bb;\">0</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>        primaryStage.setTitle(<span style=\"color:#6a8759;\">\"</span><span style=\"color:#6a8759;font-family:'宋体';\">项目管理</span><span style=\"color:#6a8759;\">\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setScene(<span style=\"color:#cc7832;\">new </span>Scene(root))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setMaximized(<span style=\"color:#cc7832;\">true</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>TabPane tabPane = (TabPane) root.getCenter()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>Iterator&lt;Tab&gt; it = tabPane.getTabs().iterator()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        while </span>(it.hasNext()) {<br>            Tab tab = it.next()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"todo\"</span>.equals(tab.getId()) || <span style=\"color:#6a8759;\">\"requirement\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">continue;<br></span><span style=\"color:#cc7832;\">            </span>}<br><br>            User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"myCalendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()<br>                        || !ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.<span style=\"background-color:#344134;\">showMyCalendar</span>()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"calendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.showCalendar()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"userManager\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(loginUser.isNormalUser()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"env\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"note\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }     <br><br><br><span style=\"color:#808080;\">//        primaryStage.initStyle(StageStyle.UNDECORATED);<br></span><span style=\"color:#808080;\">//        javafx.geometry.Rectangle2D bounds = Screen.getPrimary().getVisualBounds();<br></span><span style=\"color:#808080;\">//        primaryStage.setX(bounds.getMinX());<br></span><span style=\"color:#808080;\">//        primaryStage.setY(bounds.getMinY());<br></span><span style=\"color:#808080;\">//        primaryStage.setWidth(bounds.getWidth());<br></span><span style=\"color:#808080;\">//        primaryStage.setHeight(bounds.getHeight());<br></span><span style=\"color:#808080;\"><br></span><span style=\"color:#808080;\">        </span>primaryStage.initStyle(StageStyle.<span style=\"color:#9876aa;font-style:italic;\">UNIFIED</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>root.getStylesheets().add(<span style=\"color:#6a8759;\">\"/main.css\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>primaryStage.show()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br><br><br>    <span style=\"color:#cc7832;\">public static void </span><span style=\"color:#ffc66d;\">main</span>(String[] args) {<br>        <span style=\"font-style:italic;\">launch</span>(args)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br>}<br></pre></body></html>","createTime":"2017-08-26 22:53:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":127,"name":"123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">1231123123123123123a &nbsp; a a &nbsp;斯塔大柳塔</font></p></body></html>","createTime":"2017-08-26 23:00:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":128,"name":"222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p>a<font face=\"Segoe UI\">斯塔克格勃工工</font></p></body></html>","createTime":"2017-08-26 23:00:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":6,"fileName":"1.doc","savedFileName":null,"noteId":128}]},{"id":129,"name":"12312312322222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">adfasdfsadf1111 &nbsp; &nbsp; adfad asd asdfasd asdf asd as asdfadsf a adasdfa dsaf asdasd fa工</font></p></body></html>","createTime":"2017-08-26 23:00:48","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":8,"fileName":"未解.docx","savedFileName":"3f042eed-40a5-4bf7-a4af-cd252dd3eed0..docx","noteId":129}]},{"id":130,"name":"123123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">ssdfsdf1212312311111aaaa</font></p></body></html>","createTime":"2017-08-26 23:00:56","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":132,"name":"2222222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">222222</font></p></body></html>","createTime":"2017-08-29 11:14:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":164,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123123</font></p></body></html>","createTime":"2017-08-30 09:25:14","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":165,"name":"aaaaaaa","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">aaaaaaaadfadsf asdf</font></p></body></html>","createTime":"2017-08-30 09:25:27","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":167,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123</font></p></body></html>","createTime":"2017-09-04 11:02:02","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]}],"content":"","createTime":"2017-08-26 22:53:07","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":126,"name":"qe123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><pre style=\"background-color:#2b2b2b;color:#a9b7c6;font-family:'Consolas';font-size:9.0pt;\"><span style=\"color:#cc7832;\">package </span>com.liuqi.tool.todo.ui<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.exceptions.TodoException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.model.User<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.Cache<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.ConfigProxy<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.application.Application<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.fxml.FXMLLoader<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Parent<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Scene<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.Tab<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.TabPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.layout.BorderPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Screen<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Stage<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.StageStyle<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.Logger<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.LoggerFactory<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>java.awt.geom.Rectangle2D<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.io.IOException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Iterator<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.List<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Optional<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">public class </span>Main <span style=\"color:#cc7832;\">extends </span>Application {<br>    <span style=\"color:#cc7832;\">private static </span>Logger <span style=\"color:#9876aa;font-style:italic;\">logger </span>= LoggerFactory.<span style=\"font-style:italic;\">getLogger</span>(Main.<span style=\"color:#cc7832;\">class</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">    </span><span style=\"color:#bbb529;\">@Override<br></span><span style=\"color:#bbb529;\">    </span><span style=\"color:#cc7832;\">public void </span><span style=\"color:#ffc66d;\">start</span>(Stage primaryStage) <span style=\"color:#cc7832;\">throws </span>Exception{<br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">检查是否保存用户名<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>String userName = ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.getSavedName()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>List&lt;User&gt; userList = Cache.<span style=\"font-style:italic;\">getUserList</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>== userList) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"No user exists, create an user first!\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            return;<br></span><span style=\"color:#cc7832;\">        </span>}<br><br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">根据保存的用户名查找用户<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>User findUser = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>!= userName &amp;&amp; !<span style=\"color:#6a8759;\">\"\"</span>.equals(userName)) {<br>            <span style=\"color:#cc7832;\">for </span>(User user : userList) {<br>                <span style=\"color:#cc7832;\">if </span>(userName.equals(user.getName()) || userName.equals(user.getId())) {<br>                    findUser = user<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    break;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }<br><br>        <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>== findUser) {<br>            <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">未找到用户，进行登录<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>LoginForm form = LoginForm.<span style=\"font-style:italic;\">getInstance</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>Optional&lt;User&gt; result = form.showAndWait()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>result.ifPresent(user -&gt; {<br>                <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>!= user) {<br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户与密码<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    try </span>{<br>                        ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.saveLoginInfo(loginUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>} <span style=\"color:#cc7832;\">catch </span>(TodoException e) {<br>                        <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Save login user info faield!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>}<br><br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>showMainView(<span style=\"color:#b389c5;\">primaryStage</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            })<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">else </span>{<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.info(<span style=\"color:#6a8759;\">\"Get saved user info succeeded, username: \" </span>+ findUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户信息<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>Cache.<span style=\"font-style:italic;\">setLoginUser</span>(findUser)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">找到用户，直接显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>showMainView(primaryStage)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>    }<br><br>    <span style=\"color:#cc7832;\">private void </span><span style=\"color:#ffc66d;\">showMainView</span>(Stage primaryStage) {<br>        BorderPane root = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        try </span>{<br>            root = FXMLLoader.<span style=\"font-style:italic;\">load</span>(getClass().getResource(<span style=\"color:#6a8759;\">\"sample.fxml\"</span>))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">catch </span>(IOException e) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Load fxml file failed!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>System.<span style=\"font-style:italic;\">exit</span>(<span style=\"color:#6897bb;\">0</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>        primaryStage.setTitle(<span style=\"color:#6a8759;\">\"</span><span style=\"color:#6a8759;font-family:'宋体';\">项目管理</span><span style=\"color:#6a8759;\">\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setScene(<span style=\"color:#cc7832;\">new </span>Scene(root))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setMaximized(<span style=\"color:#cc7832;\">true</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>TabPane tabPane = (TabPane) root.getCenter()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>Iterator&lt;Tab&gt; it = tabPane.getTabs().iterator()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        while </span>(it.hasNext()) {<br>            Tab tab = it.next()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"todo\"</span>.equals(tab.getId()) || <span style=\"color:#6a8759;\">\"requirement\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">continue;<br></span><span style=\"color:#cc7832;\">            </span>}<br><br>            User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"myCalendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()<br>                        || !ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.<span style=\"background-color:#344134;\">showMyCalendar</span>()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"calendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.showCalendar()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"userManager\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(loginUser.isNormalUser()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"env\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"note\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }     <br><br><br><span style=\"color:#808080;\">//        primaryStage.initStyle(StageStyle.UNDECORATED);<br></span><span style=\"color:#808080;\">//        javafx.geometry.Rectangle2D bounds = Screen.getPrimary().getVisualBounds();<br></span><span style=\"color:#808080;\">//        primaryStage.setX(bounds.getMinX());<br></span><span style=\"color:#808080;\">//        primaryStage.setY(bounds.getMinY());<br></span><span style=\"color:#808080;\">//        primaryStage.setWidth(bounds.getWidth());<br></span><span style=\"color:#808080;\">//        primaryStage.setHeight(bounds.getHeight());<br></span><span style=\"color:#808080;\"><br></span><span style=\"color:#808080;\">        </span>primaryStage.initStyle(StageStyle.<span style=\"color:#9876aa;font-style:italic;\">UNIFIED</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>root.getStylesheets().add(<span style=\"color:#6a8759;\">\"/main.css\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>primaryStage.show()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br><br><br>    <span style=\"color:#cc7832;\">public static void </span><span style=\"color:#ffc66d;\">main</span>(String[] args) {<br>        <span style=\"font-style:italic;\">launch</span>(args)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br>}<br></pre></body></html>","createTime":"2017-08-26 22:53:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":127,"name":"123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">1231123123123123123a &nbsp; a a &nbsp;斯塔大柳塔</font></p></body></html>","createTime":"2017-08-26 23:00:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":128,"name":"222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p>a<font face=\"Segoe UI\">斯塔克格勃工工</font></p></body></html>","createTime":"2017-08-26 23:00:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":6,"fileName":"1.doc","savedFileName":null,"noteId":128}]},{"id":129,"name":"12312312322222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">adfasdfsadf1111 &nbsp; &nbsp; adfad asd asdfasd asdf asd as asdfadsf a adasdfa dsaf asdasd fa工</font></p></body></html>","createTime":"2017-08-26 23:00:48","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":8,"fileName":"未解.docx","savedFileName":"3f042eed-40a5-4bf7-a4af-cd252dd3eed0..docx","noteId":129}]},{"id":130,"name":"123123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">ssdfsdf1212312311111aaaa</font></p></body></html>","createTime":"2017-08-26 23:00:56","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":132,"name":"2222222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">222222</font></p></body></html>","createTime":"2017-08-29 11:14:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":164,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123123</font></p></body></html>","createTime":"2017-08-30 09:25:14","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":165,"name":"aaaaaaa","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">aaaaaaaadfadsf asdf</font></p></body></html>","createTime":"2017-08-30 09:25:27","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":167,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123</font></p></body></html>","createTime":"2017-09-04 11:02:02","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]}] 
DEBUG [2017-09-04 11:48:46,584][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-04 11:48:47,391][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1}] 
INFO  [2017-09-04 11:48:47,690][] com.liuqi.tool.todo.ui.Main:69 - Get saved user info succeeded, username: 刘奇 
DEBUG [2017-09-04 11:48:48,216][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170903, send json:  
DEBUG [2017-09-04 11:48:48,257][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,324][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170904, send json:  
DEBUG [2017-09-04 11:48:48,335][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,343][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170905, send json:  
DEBUG [2017-09-04 11:48:48,355][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,366][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170906, send json:  
DEBUG [2017-09-04 11:48:48,385][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,398][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170907, send json:  
DEBUG [2017-09-04 11:48:48,427][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,437][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170908, send json:  
DEBUG [2017-09-04 11:48:48,453][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,463][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170909, send json:  
DEBUG [2017-09-04 11:48:48,473][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,483][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170903, send json:  
DEBUG [2017-09-04 11:48:48,494][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,501][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170904, send json:  
DEBUG [2017-09-04 11:48:48,511][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,517][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170905, send json:  
DEBUG [2017-09-04 11:48:48,527][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,533][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170906, send json:  
DEBUG [2017-09-04 11:48:48,544][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,549][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170907, send json:  
DEBUG [2017-09-04 11:48:48,557][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,563][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170908, send json:  
DEBUG [2017-09-04 11:48:48,572][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,580][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170909, send json:  
DEBUG [2017-09-04 11:48:48,596][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,613][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170903, send json:  
DEBUG [2017-09-04 11:48:48,629][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,635][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170904, send json:  
DEBUG [2017-09-04 11:48:48,645][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,651][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170905, send json:  
DEBUG [2017-09-04 11:48:48,662][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,670][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170906, send json:  
DEBUG [2017-09-04 11:48:48,682][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,688][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170907, send json:  
DEBUG [2017-09-04 11:48:48,705][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,710][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170908, send json:  
DEBUG [2017-09-04 11:48:48,721][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,726][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170909, send json:  
DEBUG [2017-09-04 11:48:48,736][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,784][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/list/刘奇, send json:  
DEBUG [2017-09-04 11:48:48,800][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:48,838][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/requirement/list/刘奇, send json:  
DEBUG [2017-09-04 11:48:48,849][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:49,042][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/requirement/listBusiUsers, send json:  
DEBUG [2017-09-04 11:48:49,071][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:49,081][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-04 11:48:49,091][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1}] 
DEBUG [2017-09-04 11:48:49,108][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-04 11:48:49,117][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1}] 
DEBUG [2017-09-04 11:48:49,125][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/workOff/list, send json:  
DEBUG [2017-09-04 11:48:49,144][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:48:49,249][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/env/list, send json:  
DEBUG [2017-09-04 11:48:49,305][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":1,"system":"123123","type":"开发环境","serverType":"应用服务器","address":"123123","users":"123123","remark":"123123"}] 
DEBUG [2017-09-04 11:48:49,367][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/note/list, send json:  
DEBUG [2017-09-04 11:48:49,590][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":125,"name":"222","directory":true,"parent":null,"childrens":[{"id":126,"name":"qe123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><pre style=\"background-color:#2b2b2b;color:#a9b7c6;font-family:'Consolas';font-size:9.0pt;\"><span style=\"color:#cc7832;\">package </span>com.liuqi.tool.todo.ui<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.exceptions.TodoException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.model.User<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.Cache<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.ConfigProxy<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.application.Application<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.fxml.FXMLLoader<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Parent<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Scene<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.Tab<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.TabPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.layout.BorderPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Screen<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Stage<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.StageStyle<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.Logger<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.LoggerFactory<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>java.awt.geom.Rectangle2D<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.io.IOException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Iterator<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.List<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Optional<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">public class </span>Main <span style=\"color:#cc7832;\">extends </span>Application {<br>    <span style=\"color:#cc7832;\">private static </span>Logger <span style=\"color:#9876aa;font-style:italic;\">logger </span>= LoggerFactory.<span style=\"font-style:italic;\">getLogger</span>(Main.<span style=\"color:#cc7832;\">class</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">    </span><span style=\"color:#bbb529;\">@Override<br></span><span style=\"color:#bbb529;\">    </span><span style=\"color:#cc7832;\">public void </span><span style=\"color:#ffc66d;\">start</span>(Stage primaryStage) <span style=\"color:#cc7832;\">throws </span>Exception{<br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">检查是否保存用户名<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>String userName = ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.getSavedName()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>List&lt;User&gt; userList = Cache.<span style=\"font-style:italic;\">getUserList</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>== userList) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"No user exists, create an user first!\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            return;<br></span><span style=\"color:#cc7832;\">        </span>}<br><br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">根据保存的用户名查找用户<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>User findUser = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>!= userName &amp;&amp; !<span style=\"color:#6a8759;\">\"\"</span>.equals(userName)) {<br>            <span style=\"color:#cc7832;\">for </span>(User user : userList) {<br>                <span style=\"color:#cc7832;\">if </span>(userName.equals(user.getName()) || userName.equals(user.getId())) {<br>                    findUser = user<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    break;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }<br><br>        <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>== findUser) {<br>            <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">未找到用户，进行登录<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>LoginForm form = LoginForm.<span style=\"font-style:italic;\">getInstance</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>Optional&lt;User&gt; result = form.showAndWait()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>result.ifPresent(user -&gt; {<br>                <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>!= user) {<br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户与密码<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    try </span>{<br>                        ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.saveLoginInfo(loginUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>} <span style=\"color:#cc7832;\">catch </span>(TodoException e) {<br>                        <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Save login user info faield!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>}<br><br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>showMainView(<span style=\"color:#b389c5;\">primaryStage</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            })<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">else </span>{<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.info(<span style=\"color:#6a8759;\">\"Get saved user info succeeded, username: \" </span>+ findUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户信息<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>Cache.<span style=\"font-style:italic;\">setLoginUser</span>(findUser)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">找到用户，直接显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>showMainView(primaryStage)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>    }<br><br>    <span style=\"color:#cc7832;\">private void </span><span style=\"color:#ffc66d;\">showMainView</span>(Stage primaryStage) {<br>        BorderPane root = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        try </span>{<br>            root = FXMLLoader.<span style=\"font-style:italic;\">load</span>(getClass().getResource(<span style=\"color:#6a8759;\">\"sample.fxml\"</span>))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">catch </span>(IOException e) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Load fxml file failed!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>System.<span style=\"font-style:italic;\">exit</span>(<span style=\"color:#6897bb;\">0</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>        primaryStage.setTitle(<span style=\"color:#6a8759;\">\"</span><span style=\"color:#6a8759;font-family:'宋体';\">项目管理</span><span style=\"color:#6a8759;\">\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setScene(<span style=\"color:#cc7832;\">new </span>Scene(root))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setMaximized(<span style=\"color:#cc7832;\">true</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>TabPane tabPane = (TabPane) root.getCenter()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>Iterator&lt;Tab&gt; it = tabPane.getTabs().iterator()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        while </span>(it.hasNext()) {<br>            Tab tab = it.next()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"todo\"</span>.equals(tab.getId()) || <span style=\"color:#6a8759;\">\"requirement\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">continue;<br></span><span style=\"color:#cc7832;\">            </span>}<br><br>            User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"myCalendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()<br>                        || !ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.<span style=\"background-color:#344134;\">showMyCalendar</span>()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"calendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.showCalendar()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"userManager\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(loginUser.isNormalUser()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"env\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"note\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }     <br><br><br><span style=\"color:#808080;\">//        primaryStage.initStyle(StageStyle.UNDECORATED);<br></span><span style=\"color:#808080;\">//        javafx.geometry.Rectangle2D bounds = Screen.getPrimary().getVisualBounds();<br></span><span style=\"color:#808080;\">//        primaryStage.setX(bounds.getMinX());<br></span><span style=\"color:#808080;\">//        primaryStage.setY(bounds.getMinY());<br></span><span style=\"color:#808080;\">//        primaryStage.setWidth(bounds.getWidth());<br></span><span style=\"color:#808080;\">//        primaryStage.setHeight(bounds.getHeight());<br></span><span style=\"color:#808080;\"><br></span><span style=\"color:#808080;\">        </span>primaryStage.initStyle(StageStyle.<span style=\"color:#9876aa;font-style:italic;\">UNIFIED</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>root.getStylesheets().add(<span style=\"color:#6a8759;\">\"/main.css\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>primaryStage.show()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br><br><br>    <span style=\"color:#cc7832;\">public static void </span><span style=\"color:#ffc66d;\">main</span>(String[] args) {<br>        <span style=\"font-style:italic;\">launch</span>(args)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br>}<br></pre></body></html>","createTime":"2017-08-26 22:53:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":127,"name":"123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">1231123123123123123a &nbsp; a a &nbsp;斯塔大柳塔</font></p></body></html>","createTime":"2017-08-26 23:00:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":128,"name":"222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p>a<font face=\"Segoe UI\">斯塔克格勃工工</font></p></body></html>","createTime":"2017-08-26 23:00:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":6,"fileName":"1.doc","savedFileName":null,"noteId":128}]},{"id":129,"name":"12312312322222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">adfasdfsadf1111 &nbsp; &nbsp; adfad asd asdfasd asdf asd as asdfadsf a adasdfa dsaf asdasd fa工</font></p></body></html>","createTime":"2017-08-26 23:00:48","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":8,"fileName":"未解.docx","savedFileName":"3f042eed-40a5-4bf7-a4af-cd252dd3eed0..docx","noteId":129}]},{"id":130,"name":"123123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">ssdfsdf1212312311111aaaa</font></p></body></html>","createTime":"2017-08-26 23:00:56","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":132,"name":"2222222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">222222</font></p></body></html>","createTime":"2017-08-29 11:14:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":164,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123123</font></p></body></html>","createTime":"2017-08-30 09:25:14","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":165,"name":"aaaaaaa","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">aaaaaaaadfadsf asdf</font></p></body></html>","createTime":"2017-08-30 09:25:27","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":167,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123</font></p></body></html>","createTime":"2017-09-04 11:02:02","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]}],"content":"","createTime":"2017-08-26 22:53:07","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":126,"name":"qe123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><pre style=\"background-color:#2b2b2b;color:#a9b7c6;font-family:'Consolas';font-size:9.0pt;\"><span style=\"color:#cc7832;\">package </span>com.liuqi.tool.todo.ui<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.exceptions.TodoException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.model.User<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.Cache<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.ConfigProxy<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.application.Application<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.fxml.FXMLLoader<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Parent<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Scene<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.Tab<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.TabPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.layout.BorderPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Screen<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Stage<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.StageStyle<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.Logger<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.LoggerFactory<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>java.awt.geom.Rectangle2D<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.io.IOException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Iterator<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.List<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Optional<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">public class </span>Main <span style=\"color:#cc7832;\">extends </span>Application {<br>    <span style=\"color:#cc7832;\">private static </span>Logger <span style=\"color:#9876aa;font-style:italic;\">logger </span>= LoggerFactory.<span style=\"font-style:italic;\">getLogger</span>(Main.<span style=\"color:#cc7832;\">class</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">    </span><span style=\"color:#bbb529;\">@Override<br></span><span style=\"color:#bbb529;\">    </span><span style=\"color:#cc7832;\">public void </span><span style=\"color:#ffc66d;\">start</span>(Stage primaryStage) <span style=\"color:#cc7832;\">throws </span>Exception{<br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">检查是否保存用户名<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>String userName = ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.getSavedName()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>List&lt;User&gt; userList = Cache.<span style=\"font-style:italic;\">getUserList</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>== userList) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"No user exists, create an user first!\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            return;<br></span><span style=\"color:#cc7832;\">        </span>}<br><br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">根据保存的用户名查找用户<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>User findUser = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>!= userName &amp;&amp; !<span style=\"color:#6a8759;\">\"\"</span>.equals(userName)) {<br>            <span style=\"color:#cc7832;\">for </span>(User user : userList) {<br>                <span style=\"color:#cc7832;\">if </span>(userName.equals(user.getName()) || userName.equals(user.getId())) {<br>                    findUser = user<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    break;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }<br><br>        <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>== findUser) {<br>            <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">未找到用户，进行登录<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>LoginForm form = LoginForm.<span style=\"font-style:italic;\">getInstance</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>Optional&lt;User&gt; result = form.showAndWait()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>result.ifPresent(user -&gt; {<br>                <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>!= user) {<br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户与密码<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    try </span>{<br>                        ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.saveLoginInfo(loginUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>} <span style=\"color:#cc7832;\">catch </span>(TodoException e) {<br>                        <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Save login user info faield!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>}<br><br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>showMainView(<span style=\"color:#b389c5;\">primaryStage</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            })<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">else </span>{<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.info(<span style=\"color:#6a8759;\">\"Get saved user info succeeded, username: \" </span>+ findUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户信息<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>Cache.<span style=\"font-style:italic;\">setLoginUser</span>(findUser)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">找到用户，直接显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>showMainView(primaryStage)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>    }<br><br>    <span style=\"color:#cc7832;\">private void </span><span style=\"color:#ffc66d;\">showMainView</span>(Stage primaryStage) {<br>        BorderPane root = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        try </span>{<br>            root = FXMLLoader.<span style=\"font-style:italic;\">load</span>(getClass().getResource(<span style=\"color:#6a8759;\">\"sample.fxml\"</span>))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">catch </span>(IOException e) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Load fxml file failed!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>System.<span style=\"font-style:italic;\">exit</span>(<span style=\"color:#6897bb;\">0</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>        primaryStage.setTitle(<span style=\"color:#6a8759;\">\"</span><span style=\"color:#6a8759;font-family:'宋体';\">项目管理</span><span style=\"color:#6a8759;\">\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setScene(<span style=\"color:#cc7832;\">new </span>Scene(root))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setMaximized(<span style=\"color:#cc7832;\">true</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>TabPane tabPane = (TabPane) root.getCenter()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>Iterator&lt;Tab&gt; it = tabPane.getTabs().iterator()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        while </span>(it.hasNext()) {<br>            Tab tab = it.next()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"todo\"</span>.equals(tab.getId()) || <span style=\"color:#6a8759;\">\"requirement\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">continue;<br></span><span style=\"color:#cc7832;\">            </span>}<br><br>            User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"myCalendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()<br>                        || !ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.<span style=\"background-color:#344134;\">showMyCalendar</span>()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"calendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.showCalendar()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"userManager\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(loginUser.isNormalUser()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"env\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"note\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }     <br><br><br><span style=\"color:#808080;\">//        primaryStage.initStyle(StageStyle.UNDECORATED);<br></span><span style=\"color:#808080;\">//        javafx.geometry.Rectangle2D bounds = Screen.getPrimary().getVisualBounds();<br></span><span style=\"color:#808080;\">//        primaryStage.setX(bounds.getMinX());<br></span><span style=\"color:#808080;\">//        primaryStage.setY(bounds.getMinY());<br></span><span style=\"color:#808080;\">//        primaryStage.setWidth(bounds.getWidth());<br></span><span style=\"color:#808080;\">//        primaryStage.setHeight(bounds.getHeight());<br></span><span style=\"color:#808080;\"><br></span><span style=\"color:#808080;\">        </span>primaryStage.initStyle(StageStyle.<span style=\"color:#9876aa;font-style:italic;\">UNIFIED</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>root.getStylesheets().add(<span style=\"color:#6a8759;\">\"/main.css\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>primaryStage.show()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br><br><br>    <span style=\"color:#cc7832;\">public static void </span><span style=\"color:#ffc66d;\">main</span>(String[] args) {<br>        <span style=\"font-style:italic;\">launch</span>(args)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br>}<br></pre></body></html>","createTime":"2017-08-26 22:53:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":127,"name":"123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">1231123123123123123a &nbsp; a a &nbsp;斯塔大柳塔</font></p></body></html>","createTime":"2017-08-26 23:00:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":128,"name":"222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p>a<font face=\"Segoe UI\">斯塔克格勃工工</font></p></body></html>","createTime":"2017-08-26 23:00:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":6,"fileName":"1.doc","savedFileName":null,"noteId":128}]},{"id":129,"name":"12312312322222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">adfasdfsadf1111 &nbsp; &nbsp; adfad asd asdfasd asdf asd as asdfadsf a adasdfa dsaf asdasd fa工</font></p></body></html>","createTime":"2017-08-26 23:00:48","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":8,"fileName":"未解.docx","savedFileName":"3f042eed-40a5-4bf7-a4af-cd252dd3eed0..docx","noteId":129}]},{"id":130,"name":"123123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">ssdfsdf1212312311111aaaa</font></p></body></html>","createTime":"2017-08-26 23:00:56","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":132,"name":"2222222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">222222</font></p></body></html>","createTime":"2017-08-29 11:14:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":164,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123123</font></p></body></html>","createTime":"2017-08-30 09:25:14","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":165,"name":"aaaaaaa","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">aaaaaaaadfadsf asdf</font></p></body></html>","createTime":"2017-08-30 09:25:27","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":167,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123</font></p></body></html>","createTime":"2017-09-04 11:02:02","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]}] 
DEBUG [2017-09-04 11:49:00,064][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/requirement/list/刘奇, send json:  
DEBUG [2017-09-04 11:49:00,075][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 11:49:01,433][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-04 11:49:01,441][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1}] 
DEBUG [2017-09-04 11:49:01,824][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-04 11:49:01,833][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1}] 
DEBUG [2017-09-04 11:49:16,040][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
ERROR [2017-09-04 11:49:18,065][] com.liuqi.tool.todo.util.Ajax:209 - Get response from server failed! 
org.apache.http.conn.HttpHostConnectException: Connect to localhost:80 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:159)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108)
	at com.liuqi.tool.todo.util.Ajax.connect(Ajax.java:207)
	at com.liuqi.tool.todo.util.Ajax.getResponseJsonData(Ajax.java:254)
	at com.liuqi.tool.todo.util.Ajax.internalPost(Ajax.java:187)
	at com.liuqi.tool.todo.util.Ajax.post(Ajax.java:64)
	at com.liuqi.tool.todo.util.AjaxProxy.lambda$listAllUsers$7(AjaxProxy.java:271)
	at com.liuqi.tool.todo.util.AjaxProxy.call(AjaxProxy.java:303)
	at com.liuqi.tool.todo.util.AjaxProxy.listAllUsers(AjaxProxy.java:270)
	at com.liuqi.tool.todo.util.Cache.getUserList(Cache.java:46)
	at com.liuqi.tool.todo.util.Cache.refreshUsers(Cache.java:37)
	at com.liuqi.tool.todo.util.Cache.getAuthUserList(Cache.java:75)
	at com.liuqi.tool.todo.ui.user.UserManagerView.getItems(UserManagerView.java:82)
	at com.liuqi.tool.todo.ui.common.LToolBarTableView.refreshData(LToolBarTableView.java:72)
	at com.liuqi.tool.todo.ui.common.LToolBarTableView.lambda$new$0(LToolBarTableView.java:47)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Node.fireEvent(Node.java:8411)
	at javafx.scene.control.Button.fire(Button.java:185)
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:182)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:96)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:89)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:380)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:294)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$354(GlassViewEventHandler.java:416)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:415)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 77 common frames omitted
DEBUG [2017-09-04 11:49:18,121][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
ERROR [2017-09-04 11:49:20,139][] com.liuqi.tool.todo.util.Ajax:209 - Get response from server failed! 
org.apache.http.conn.HttpHostConnectException: Connect to localhost:80 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:159)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108)
	at com.liuqi.tool.todo.util.Ajax.connect(Ajax.java:207)
	at com.liuqi.tool.todo.util.Ajax.getResponseJsonData(Ajax.java:254)
	at com.liuqi.tool.todo.util.Ajax.internalPost(Ajax.java:187)
	at com.liuqi.tool.todo.util.Ajax.post(Ajax.java:64)
	at com.liuqi.tool.todo.util.AjaxProxy.lambda$listAllUsers$7(AjaxProxy.java:271)
	at com.liuqi.tool.todo.util.AjaxProxy.call(AjaxProxy.java:303)
	at com.liuqi.tool.todo.util.AjaxProxy.listAllUsers(AjaxProxy.java:270)
	at com.liuqi.tool.todo.util.Cache.getUserList(Cache.java:46)
	at com.liuqi.tool.todo.util.Cache.refreshUsers(Cache.java:37)
	at com.liuqi.tool.todo.util.Cache.getAuthUserList(Cache.java:75)
	at com.liuqi.tool.todo.ui.user.UserManagerView.getItems(UserManagerView.java:82)
	at com.liuqi.tool.todo.ui.common.LToolBarTableView.refreshData(LToolBarTableView.java:72)
	at com.liuqi.tool.todo.ui.common.LToolBarTableView.lambda$new$0(LToolBarTableView.java:47)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Node.fireEvent(Node.java:8411)
	at javafx.scene.control.Button.fire(Button.java:185)
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:182)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:96)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:89)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:380)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:294)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$354(GlassViewEventHandler.java:416)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:415)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 77 common frames omitted
DEBUG [2017-09-04 11:49:20,181][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
ERROR [2017-09-04 11:49:22,196][] com.liuqi.tool.todo.util.Ajax:209 - Get response from server failed! 
org.apache.http.conn.HttpHostConnectException: Connect to localhost:80 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:159)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108)
	at com.liuqi.tool.todo.util.Ajax.connect(Ajax.java:207)
	at com.liuqi.tool.todo.util.Ajax.getResponseJsonData(Ajax.java:254)
	at com.liuqi.tool.todo.util.Ajax.internalPost(Ajax.java:187)
	at com.liuqi.tool.todo.util.Ajax.post(Ajax.java:64)
	at com.liuqi.tool.todo.util.AjaxProxy.lambda$listAllUsers$7(AjaxProxy.java:271)
	at com.liuqi.tool.todo.util.AjaxProxy.call(AjaxProxy.java:303)
	at com.liuqi.tool.todo.util.AjaxProxy.listAllUsers(AjaxProxy.java:270)
	at com.liuqi.tool.todo.util.Cache.getUserList(Cache.java:46)
	at com.liuqi.tool.todo.util.Cache.refreshUsers(Cache.java:37)
	at com.liuqi.tool.todo.util.Cache.getAuthUserList(Cache.java:75)
	at com.liuqi.tool.todo.ui.user.UserManagerView.getItems(UserManagerView.java:82)
	at com.liuqi.tool.todo.ui.common.LToolBarTableView.refreshData(LToolBarTableView.java:72)
	at com.liuqi.tool.todo.ui.common.LToolBarTableView.lambda$new$0(LToolBarTableView.java:47)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Node.fireEvent(Node.java:8411)
	at javafx.scene.control.Button.fire(Button.java:185)
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:182)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:96)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:89)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:380)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:294)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$354(GlassViewEventHandler.java:416)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:415)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 77 common frames omitted
DEBUG [2017-09-04 11:49:22,204][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
ERROR [2017-09-04 11:49:24,218][] com.liuqi.tool.todo.util.Ajax:209 - Get response from server failed! 
org.apache.http.conn.HttpHostConnectException: Connect to localhost:80 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:159)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108)
	at com.liuqi.tool.todo.util.Ajax.connect(Ajax.java:207)
	at com.liuqi.tool.todo.util.Ajax.getResponseJsonData(Ajax.java:254)
	at com.liuqi.tool.todo.util.Ajax.internalPost(Ajax.java:187)
	at com.liuqi.tool.todo.util.Ajax.post(Ajax.java:64)
	at com.liuqi.tool.todo.util.AjaxProxy.lambda$listAllUsers$7(AjaxProxy.java:271)
	at com.liuqi.tool.todo.util.AjaxProxy.call(AjaxProxy.java:303)
	at com.liuqi.tool.todo.util.AjaxProxy.listAllUsers(AjaxProxy.java:270)
	at com.liuqi.tool.todo.util.Cache.getUserList(Cache.java:46)
	at com.liuqi.tool.todo.util.Cache.refreshUsers(Cache.java:37)
	at com.liuqi.tool.todo.util.Cache.getAuthUserList(Cache.java:75)
	at com.liuqi.tool.todo.ui.user.UserManagerView.getItems(UserManagerView.java:82)
	at com.liuqi.tool.todo.ui.common.LToolBarTableView.refreshData(LToolBarTableView.java:72)
	at com.liuqi.tool.todo.ui.common.LToolBarTableView.lambda$new$0(LToolBarTableView.java:47)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Node.fireEvent(Node.java:8411)
	at javafx.scene.control.Button.fire(Button.java:185)
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:182)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:96)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:89)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:380)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:294)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$354(GlassViewEventHandler.java:416)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:415)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 77 common frames omitted
DEBUG [2017-09-04 11:49:26,728][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
ERROR [2017-09-04 11:49:28,736][] com.liuqi.tool.todo.util.Ajax:209 - Get response from server failed! 
org.apache.http.conn.HttpHostConnectException: Connect to localhost:80 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:159)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108)
	at com.liuqi.tool.todo.util.Ajax.connect(Ajax.java:207)
	at com.liuqi.tool.todo.util.Ajax.getResponseJsonData(Ajax.java:254)
	at com.liuqi.tool.todo.util.Ajax.internalPost(Ajax.java:187)
	at com.liuqi.tool.todo.util.Ajax.post(Ajax.java:64)
	at com.liuqi.tool.todo.util.AjaxProxy.lambda$listAllUsers$7(AjaxProxy.java:271)
	at com.liuqi.tool.todo.util.AjaxProxy.call(AjaxProxy.java:303)
	at com.liuqi.tool.todo.util.AjaxProxy.listAllUsers(AjaxProxy.java:270)
	at com.liuqi.tool.todo.util.Cache.getUserList(Cache.java:46)
	at com.liuqi.tool.todo.util.Cache.refreshUsers(Cache.java:37)
	at com.liuqi.tool.todo.util.Cache.getAuthUserList(Cache.java:75)
	at com.liuqi.tool.todo.ui.user.UserManagerView.getItems(UserManagerView.java:82)
	at com.liuqi.tool.todo.ui.common.LToolBarTableView.refreshData(LToolBarTableView.java:72)
	at com.liuqi.tool.todo.ui.common.LToolBarTableView.lambda$new$0(LToolBarTableView.java:47)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Node.fireEvent(Node.java:8411)
	at javafx.scene.control.Button.fire(Button.java:185)
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:182)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:96)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:89)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:380)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:294)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$354(GlassViewEventHandler.java:416)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:415)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 77 common frames omitted
DEBUG [2017-09-04 11:49:30,336][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
ERROR [2017-09-04 11:49:32,344][] com.liuqi.tool.todo.util.Ajax:209 - Get response from server failed! 
org.apache.http.conn.HttpHostConnectException: Connect to localhost:80 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:159)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108)
	at com.liuqi.tool.todo.util.Ajax.connect(Ajax.java:207)
	at com.liuqi.tool.todo.util.Ajax.getResponseJsonData(Ajax.java:254)
	at com.liuqi.tool.todo.util.Ajax.internalPost(Ajax.java:187)
	at com.liuqi.tool.todo.util.Ajax.post(Ajax.java:64)
	at com.liuqi.tool.todo.util.AjaxProxy.lambda$listAllUsers$7(AjaxProxy.java:271)
	at com.liuqi.tool.todo.util.AjaxProxy.call(AjaxProxy.java:303)
	at com.liuqi.tool.todo.util.AjaxProxy.listAllUsers(AjaxProxy.java:270)
	at com.liuqi.tool.todo.util.Cache.getUserList(Cache.java:46)
	at com.liuqi.tool.todo.util.Cache.refreshUsers(Cache.java:37)
	at com.liuqi.tool.todo.util.Cache.getAuthUserList(Cache.java:75)
	at com.liuqi.tool.todo.ui.user.UserManagerView.getItems(UserManagerView.java:82)
	at com.liuqi.tool.todo.ui.common.LToolBarTableView.refreshData(LToolBarTableView.java:72)
	at com.liuqi.tool.todo.ui.common.LToolBarTableView.lambda$new$0(LToolBarTableView.java:47)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Node.fireEvent(Node.java:8411)
	at javafx.scene.control.Button.fire(Button.java:185)
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:182)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:96)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:89)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:380)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:294)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$354(GlassViewEventHandler.java:416)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:415)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 77 common frames omitted
DEBUG [2017-09-04 11:49:33,833][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
ERROR [2017-09-04 11:49:35,842][] com.liuqi.tool.todo.util.Ajax:209 - Get response from server failed! 
org.apache.http.conn.HttpHostConnectException: Connect to localhost:80 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:159)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108)
	at com.liuqi.tool.todo.util.Ajax.connect(Ajax.java:207)
	at com.liuqi.tool.todo.util.Ajax.getResponseJsonData(Ajax.java:254)
	at com.liuqi.tool.todo.util.Ajax.internalPost(Ajax.java:187)
	at com.liuqi.tool.todo.util.Ajax.post(Ajax.java:64)
	at com.liuqi.tool.todo.util.AjaxProxy.lambda$listAllUsers$7(AjaxProxy.java:271)
	at com.liuqi.tool.todo.util.AjaxProxy.call(AjaxProxy.java:303)
	at com.liuqi.tool.todo.util.AjaxProxy.listAllUsers(AjaxProxy.java:270)
	at com.liuqi.tool.todo.util.Cache.getUserList(Cache.java:46)
	at com.liuqi.tool.todo.util.Cache.refreshUsers(Cache.java:37)
	at com.liuqi.tool.todo.util.Cache.getAuthUserList(Cache.java:75)
	at com.liuqi.tool.todo.ui.user.UserManagerView.getItems(UserManagerView.java:82)
	at com.liuqi.tool.todo.ui.common.LToolBarTableView.refreshData(LToolBarTableView.java:72)
	at com.liuqi.tool.todo.ui.common.LToolBarTableView.lambda$new$0(LToolBarTableView.java:47)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Node.fireEvent(Node.java:8411)
	at javafx.scene.control.Button.fire(Button.java:185)
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:182)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:96)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:89)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:380)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:294)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$354(GlassViewEventHandler.java:416)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:415)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 77 common frames omitted
DEBUG [2017-09-04 11:49:39,153][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/workOff/list, send json:  
ERROR [2017-09-04 11:49:41,162][] com.liuqi.tool.todo.util.Ajax:209 - Get response from server failed! 
org.apache.http.conn.HttpHostConnectException: Connect to localhost:80 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:159)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108)
	at com.liuqi.tool.todo.util.Ajax.connect(Ajax.java:207)
	at com.liuqi.tool.todo.util.Ajax.getResponseJsonData(Ajax.java:254)
	at com.liuqi.tool.todo.util.Ajax.internalPost(Ajax.java:187)
	at com.liuqi.tool.todo.util.Ajax.post(Ajax.java:64)
	at com.liuqi.tool.todo.util.AjaxProxy.lambda$findAllWorkOffs$0(AjaxProxy.java:81)
	at com.liuqi.tool.todo.util.AjaxProxy.call(AjaxProxy.java:303)
	at com.liuqi.tool.todo.util.AjaxProxy.findAllWorkOffs(AjaxProxy.java:80)
	at com.liuqi.tool.todo.ui.user.WorkOffView.getItems(WorkOffView.java:169)
	at com.liuqi.tool.todo.ui.common.LToolBarTableView.refreshData(LToolBarTableView.java:72)
	at com.liuqi.tool.todo.ui.common.LToolBarTableView.lambda$new$0(LToolBarTableView.java:47)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Node.fireEvent(Node.java:8411)
	at javafx.scene.control.Button.fire(Button.java:185)
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:182)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:96)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:89)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:380)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:294)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$354(GlassViewEventHandler.java:416)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:415)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 74 common frames omitted
DEBUG [2017-09-04 11:49:42,912][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/workOff/list, send json:  
ERROR [2017-09-04 11:49:44,921][] com.liuqi.tool.todo.util.Ajax:209 - Get response from server failed! 
org.apache.http.conn.HttpHostConnectException: Connect to localhost:80 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:159)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108)
	at com.liuqi.tool.todo.util.Ajax.connect(Ajax.java:207)
	at com.liuqi.tool.todo.util.Ajax.getResponseJsonData(Ajax.java:254)
	at com.liuqi.tool.todo.util.Ajax.internalPost(Ajax.java:187)
	at com.liuqi.tool.todo.util.Ajax.post(Ajax.java:64)
	at com.liuqi.tool.todo.util.AjaxProxy.lambda$findAllWorkOffs$0(AjaxProxy.java:81)
	at com.liuqi.tool.todo.util.AjaxProxy.call(AjaxProxy.java:303)
	at com.liuqi.tool.todo.util.AjaxProxy.findAllWorkOffs(AjaxProxy.java:80)
	at com.liuqi.tool.todo.ui.user.WorkOffView.getItems(WorkOffView.java:169)
	at com.liuqi.tool.todo.ui.common.LToolBarTableView.refreshData(LToolBarTableView.java:72)
	at com.liuqi.tool.todo.ui.common.LToolBarTableView.lambda$new$0(LToolBarTableView.java:47)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Node.fireEvent(Node.java:8411)
	at javafx.scene.control.Button.fire(Button.java:185)
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:182)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:96)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:89)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:380)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:294)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$354(GlassViewEventHandler.java:416)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:415)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 74 common frames omitted
DEBUG [2017-09-04 11:49:48,168][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/env/list, send json:  
ERROR [2017-09-04 11:49:50,176][] com.liuqi.tool.todo.util.Ajax:209 - Get response from server failed! 
org.apache.http.conn.HttpHostConnectException: Connect to localhost:80 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:159)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108)
	at com.liuqi.tool.todo.util.Ajax.connect(Ajax.java:207)
	at com.liuqi.tool.todo.util.Ajax.getResponseJsonData(Ajax.java:254)
	at com.liuqi.tool.todo.util.Ajax.internalPost(Ajax.java:187)
	at com.liuqi.tool.todo.util.Ajax.post(Ajax.java:64)
	at com.liuqi.tool.todo.util.AjaxProxy.lambda$listAllEnvs$3(AjaxProxy.java:161)
	at com.liuqi.tool.todo.util.AjaxProxy.call(AjaxProxy.java:303)
	at com.liuqi.tool.todo.util.AjaxProxy.listAllEnvs(AjaxProxy.java:160)
	at com.liuqi.tool.todo.ui.env.EnvView.getItems(EnvView.java:155)
	at com.liuqi.tool.todo.ui.common.LToolBarTableView.refreshData(LToolBarTableView.java:72)
	at com.liuqi.tool.todo.ui.common.LToolBarTableView.lambda$new$0(LToolBarTableView.java:47)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Node.fireEvent(Node.java:8411)
	at javafx.scene.control.Button.fire(Button.java:185)
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:182)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:96)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:89)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:380)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:294)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$354(GlassViewEventHandler.java:416)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:415)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:589)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 74 common frames omitted
DEBUG [2017-09-04 17:12:47,550][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-04 17:12:48,760][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1}] 
INFO  [2017-09-04 17:12:49,166][] com.liuqi.tool.todo.ui.Main:69 - Get saved user info succeeded, username: 刘奇 
DEBUG [2017-09-04 17:12:49,771][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170903, send json:  
DEBUG [2017-09-04 17:12:49,851][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:49,976][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170904, send json:  
DEBUG [2017-09-04 17:12:49,993][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:50,002][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170905, send json:  
DEBUG [2017-09-04 17:12:50,030][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:50,042][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170906, send json:  
DEBUG [2017-09-04 17:12:50,068][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:50,092][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170907, send json:  
DEBUG [2017-09-04 17:12:50,122][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:50,141][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170908, send json:  
DEBUG [2017-09-04 17:12:50,170][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:50,179][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170909, send json:  
DEBUG [2017-09-04 17:12:50,197][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:50,204][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170903, send json:  
DEBUG [2017-09-04 17:12:50,228][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:50,234][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170904, send json:  
DEBUG [2017-09-04 17:12:50,250][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:50,258][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170905, send json:  
DEBUG [2017-09-04 17:12:50,274][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:50,280][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170906, send json:  
DEBUG [2017-09-04 17:12:50,294][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:50,300][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170907, send json:  
DEBUG [2017-09-04 17:12:50,314][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:50,321][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170908, send json:  
DEBUG [2017-09-04 17:12:50,336][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:50,342][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170909, send json:  
DEBUG [2017-09-04 17:12:50,360][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:50,375][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170903, send json:  
DEBUG [2017-09-04 17:12:50,400][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:50,410][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170904, send json:  
DEBUG [2017-09-04 17:12:50,427][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:50,434][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170905, send json:  
DEBUG [2017-09-04 17:12:50,448][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:50,458][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170906, send json:  
DEBUG [2017-09-04 17:12:50,474][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:50,479][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170907, send json:  
DEBUG [2017-09-04 17:12:50,498][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:50,507][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170908, send json:  
DEBUG [2017-09-04 17:12:50,520][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:50,526][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/listForPlanDate/刘奇/20170909, send json:  
DEBUG [2017-09-04 17:12:50,539][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:50,598][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/unrequirement/list/刘奇, send json:  
DEBUG [2017-09-04 17:12:50,616][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:50,669][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/requirement/list/刘奇, send json:  
DEBUG [2017-09-04 17:12:50,692][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:51,058][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/requirement/listBusiUsers, send json:  
DEBUG [2017-09-04 17:12:51,099][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:51,109][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-04 17:12:51,126][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1}] 
DEBUG [2017-09-04 17:12:51,145][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/list, send json:  
DEBUG [2017-09-04 17:12:51,161][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1}] 
DEBUG [2017-09-04 17:12:51,167][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/user/workOff/list, send json:  
DEBUG [2017-09-04 17:12:51,188][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [] 
DEBUG [2017-09-04 17:12:51,261][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/env/list, send json:  
DEBUG [2017-09-04 17:12:51,294][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":1,"system":"123123","type":"开发环境","serverType":"应用服务器","address":"123123","users":"123123","remark":"123123"}] 
DEBUG [2017-09-04 17:12:51,427][] com.liuqi.tool.todo.util.Ajax:182 - Send post request, url: http://localhost/note/list, send json:  
DEBUG [2017-09-04 17:12:51,807][] com.liuqi.tool.todo.util.Ajax:290 - Get response json: [{"id":125,"name":"222","directory":true,"parent":null,"childrens":[{"id":126,"name":"qe123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><pre style=\"background-color:#2b2b2b;color:#a9b7c6;font-family:'Consolas';font-size:9.0pt;\"><span style=\"color:#cc7832;\">package </span>com.liuqi.tool.todo.ui<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.exceptions.TodoException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.model.User<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.Cache<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.ConfigProxy<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.application.Application<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.fxml.FXMLLoader<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Parent<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Scene<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.Tab<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.TabPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.layout.BorderPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Screen<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Stage<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.StageStyle<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.Logger<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.LoggerFactory<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>java.awt.geom.Rectangle2D<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.io.IOException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Iterator<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.List<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Optional<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">public class </span>Main <span style=\"color:#cc7832;\">extends </span>Application {<br>    <span style=\"color:#cc7832;\">private static </span>Logger <span style=\"color:#9876aa;font-style:italic;\">logger </span>= LoggerFactory.<span style=\"font-style:italic;\">getLogger</span>(Main.<span style=\"color:#cc7832;\">class</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">    </span><span style=\"color:#bbb529;\">@Override<br></span><span style=\"color:#bbb529;\">    </span><span style=\"color:#cc7832;\">public void </span><span style=\"color:#ffc66d;\">start</span>(Stage primaryStage) <span style=\"color:#cc7832;\">throws </span>Exception{<br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">检查是否保存用户名<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>String userName = ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.getSavedName()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>List&lt;User&gt; userList = Cache.<span style=\"font-style:italic;\">getUserList</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>== userList) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"No user exists, create an user first!\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            return;<br></span><span style=\"color:#cc7832;\">        </span>}<br><br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">根据保存的用户名查找用户<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>User findUser = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>!= userName &amp;&amp; !<span style=\"color:#6a8759;\">\"\"</span>.equals(userName)) {<br>            <span style=\"color:#cc7832;\">for </span>(User user : userList) {<br>                <span style=\"color:#cc7832;\">if </span>(userName.equals(user.getName()) || userName.equals(user.getId())) {<br>                    findUser = user<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    break;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }<br><br>        <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>== findUser) {<br>            <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">未找到用户，进行登录<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>LoginForm form = LoginForm.<span style=\"font-style:italic;\">getInstance</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>Optional&lt;User&gt; result = form.showAndWait()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>result.ifPresent(user -&gt; {<br>                <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>!= user) {<br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户与密码<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    try </span>{<br>                        ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.saveLoginInfo(loginUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>} <span style=\"color:#cc7832;\">catch </span>(TodoException e) {<br>                        <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Save login user info faield!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>}<br><br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>showMainView(<span style=\"color:#b389c5;\">primaryStage</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            })<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">else </span>{<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.info(<span style=\"color:#6a8759;\">\"Get saved user info succeeded, username: \" </span>+ findUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户信息<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>Cache.<span style=\"font-style:italic;\">setLoginUser</span>(findUser)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">找到用户，直接显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>showMainView(primaryStage)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>    }<br><br>    <span style=\"color:#cc7832;\">private void </span><span style=\"color:#ffc66d;\">showMainView</span>(Stage primaryStage) {<br>        BorderPane root = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        try </span>{<br>            root = FXMLLoader.<span style=\"font-style:italic;\">load</span>(getClass().getResource(<span style=\"color:#6a8759;\">\"sample.fxml\"</span>))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">catch </span>(IOException e) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Load fxml file failed!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>System.<span style=\"font-style:italic;\">exit</span>(<span style=\"color:#6897bb;\">0</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>        primaryStage.setTitle(<span style=\"color:#6a8759;\">\"</span><span style=\"color:#6a8759;font-family:'宋体';\">项目管理</span><span style=\"color:#6a8759;\">\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setScene(<span style=\"color:#cc7832;\">new </span>Scene(root))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setMaximized(<span style=\"color:#cc7832;\">true</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>TabPane tabPane = (TabPane) root.getCenter()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>Iterator&lt;Tab&gt; it = tabPane.getTabs().iterator()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        while </span>(it.hasNext()) {<br>            Tab tab = it.next()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"todo\"</span>.equals(tab.getId()) || <span style=\"color:#6a8759;\">\"requirement\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">continue;<br></span><span style=\"color:#cc7832;\">            </span>}<br><br>            User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"myCalendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()<br>                        || !ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.<span style=\"background-color:#344134;\">showMyCalendar</span>()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"calendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.showCalendar()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"userManager\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(loginUser.isNormalUser()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"env\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"note\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }     <br><br><br><span style=\"color:#808080;\">//        primaryStage.initStyle(StageStyle.UNDECORATED);<br></span><span style=\"color:#808080;\">//        javafx.geometry.Rectangle2D bounds = Screen.getPrimary().getVisualBounds();<br></span><span style=\"color:#808080;\">//        primaryStage.setX(bounds.getMinX());<br></span><span style=\"color:#808080;\">//        primaryStage.setY(bounds.getMinY());<br></span><span style=\"color:#808080;\">//        primaryStage.setWidth(bounds.getWidth());<br></span><span style=\"color:#808080;\">//        primaryStage.setHeight(bounds.getHeight());<br></span><span style=\"color:#808080;\"><br></span><span style=\"color:#808080;\">        </span>primaryStage.initStyle(StageStyle.<span style=\"color:#9876aa;font-style:italic;\">UNIFIED</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>root.getStylesheets().add(<span style=\"color:#6a8759;\">\"/main.css\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>primaryStage.show()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br><br><br>    <span style=\"color:#cc7832;\">public static void </span><span style=\"color:#ffc66d;\">main</span>(String[] args) {<br>        <span style=\"font-style:italic;\">launch</span>(args)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br>}<br></pre></body></html>","createTime":"2017-08-26 22:53:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":127,"name":"123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">1231123123123123123a &nbsp; a a &nbsp;斯塔大柳塔</font></p></body></html>","createTime":"2017-08-26 23:00:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":128,"name":"222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p>a<font face=\"Segoe UI\">斯塔克格勃工工</font></p></body></html>","createTime":"2017-08-26 23:00:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":6,"fileName":"1.doc","savedFileName":null,"noteId":128}]},{"id":129,"name":"12312312322222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">adfasdfsadf1111 &nbsp; &nbsp; adfad asd asdfasd asdf asd as asdfadsf a adasdfa dsaf asdasd fa工</font></p></body></html>","createTime":"2017-08-26 23:00:48","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":8,"fileName":"未解.docx","savedFileName":"3f042eed-40a5-4bf7-a4af-cd252dd3eed0..docx","noteId":129}]},{"id":130,"name":"123123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">ssdfsdf1212312311111aaaa</font></p></body></html>","createTime":"2017-08-26 23:00:56","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":132,"name":"2222222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">222222</font></p></body></html>","createTime":"2017-08-29 11:14:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":164,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123123</font></p></body></html>","createTime":"2017-08-30 09:25:14","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":165,"name":"aaaaaaa","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">aaaaaaaadfadsf asdf</font></p></body></html>","createTime":"2017-08-30 09:25:27","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":167,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123</font></p></body></html>","createTime":"2017-09-04 11:02:02","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]}],"content":"","createTime":"2017-08-26 22:53:07","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":126,"name":"qe123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><pre style=\"background-color:#2b2b2b;color:#a9b7c6;font-family:'Consolas';font-size:9.0pt;\"><span style=\"color:#cc7832;\">package </span>com.liuqi.tool.todo.ui<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.exceptions.TodoException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.learn.model.User<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.Cache<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>com.liuqi.tool.todo.util.ConfigProxy<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.application.Application<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.fxml.FXMLLoader<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Parent<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.Scene<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.Tab<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.control.TabPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.scene.layout.BorderPane<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Screen<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.Stage<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>javafx.stage.StageStyle<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.Logger<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>org.slf4j.LoggerFactory<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">import </span>java.awt.geom.Rectangle2D<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.io.IOException<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Iterator<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.List<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">import </span>java.util.Optional<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">public class </span>Main <span style=\"color:#cc7832;\">extends </span>Application {<br>    <span style=\"color:#cc7832;\">private static </span>Logger <span style=\"color:#9876aa;font-style:italic;\">logger </span>= LoggerFactory.<span style=\"font-style:italic;\">getLogger</span>(Main.<span style=\"color:#cc7832;\">class</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">    </span><span style=\"color:#bbb529;\">@Override<br></span><span style=\"color:#bbb529;\">    </span><span style=\"color:#cc7832;\">public void </span><span style=\"color:#ffc66d;\">start</span>(Stage primaryStage) <span style=\"color:#cc7832;\">throws </span>Exception{<br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">检查是否保存用户名<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>String userName = ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.getSavedName()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>List&lt;User&gt; userList = Cache.<span style=\"font-style:italic;\">getUserList</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>== userList) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"No user exists, create an user first!\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            return;<br></span><span style=\"color:#cc7832;\">        </span>}<br><br>        <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">根据保存的用户名查找用户<br></span><span style=\"color:#808080;font-family:'宋体';\">        </span>User findUser = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        if </span>(<span style=\"color:#cc7832;\">null </span>!= userName &amp;&amp; !<span style=\"color:#6a8759;\">\"\"</span>.equals(userName)) {<br>            <span style=\"color:#cc7832;\">for </span>(User user : userList) {<br>                <span style=\"color:#cc7832;\">if </span>(userName.equals(user.getName()) || userName.equals(user.getId())) {<br>                    findUser = user<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    break;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }<br><br>        <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>== findUser) {<br>            <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">未找到用户，进行登录<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>LoginForm form = LoginForm.<span style=\"font-style:italic;\">getInstance</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>Optional&lt;User&gt; result = form.showAndWait()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>result.ifPresent(user -&gt; {<br>                <span style=\"color:#cc7832;\">if </span>(<span style=\"color:#cc7832;\">null </span>!= user) {<br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户与密码<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    try </span>{<br>                        ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.saveLoginInfo(loginUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>} <span style=\"color:#cc7832;\">catch </span>(TodoException e) {<br>                        <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Save login user info faield!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                    </span>}<br><br>                    <span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">                    </span>showMainView(<span style=\"color:#b389c5;\">primaryStage</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            })<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">else </span>{<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.info(<span style=\"color:#6a8759;\">\"Get saved user info succeeded, username: \" </span>+ findUser.getName())<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">保存登录的用户信息<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>Cache.<span style=\"font-style:italic;\">setLoginUser</span>(findUser)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            </span><span style=\"color:#808080;\">//</span><span style=\"color:#808080;font-family:'宋体';\">找到用户，直接显示主界面<br></span><span style=\"color:#808080;font-family:'宋体';\">            </span>showMainView(primaryStage)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>    }<br><br>    <span style=\"color:#cc7832;\">private void </span><span style=\"color:#ffc66d;\">showMainView</span>(Stage primaryStage) {<br>        BorderPane root = <span style=\"color:#cc7832;\">null;<br></span><span style=\"color:#cc7832;\">        try </span>{<br>            root = FXMLLoader.<span style=\"font-style:italic;\">load</span>(getClass().getResource(<span style=\"color:#6a8759;\">\"sample.fxml\"</span>))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>} <span style=\"color:#cc7832;\">catch </span>(IOException e) {<br>            <span style=\"color:#9876aa;font-style:italic;\">logger</span>.error(<span style=\"color:#6a8759;\">\"Load fxml file failed!\"</span><span style=\"color:#cc7832;\">, </span>e)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            </span>System.<span style=\"font-style:italic;\">exit</span>(<span style=\"color:#6897bb;\">0</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>}<br>        primaryStage.setTitle(<span style=\"color:#6a8759;\">\"</span><span style=\"color:#6a8759;font-family:'宋体';\">项目管理</span><span style=\"color:#6a8759;\">\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setScene(<span style=\"color:#cc7832;\">new </span>Scene(root))<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>primaryStage.setMaximized(<span style=\"color:#cc7832;\">true</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>TabPane tabPane = (TabPane) root.getCenter()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        </span>Iterator&lt;Tab&gt; it = tabPane.getTabs().iterator()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">        while </span>(it.hasNext()) {<br>            Tab tab = it.next()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"todo\"</span>.equals(tab.getId()) || <span style=\"color:#6a8759;\">\"requirement\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">continue;<br></span><span style=\"color:#cc7832;\">            </span>}<br><br>            User loginUser = Cache.<span style=\"font-style:italic;\">getLoginUser</span>()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">            if </span>(<span style=\"color:#6a8759;\">\"myCalendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()<br>                        || !ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.<span style=\"background-color:#344134;\">showMyCalendar</span>()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"calendar\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!ConfigProxy.<span style=\"color:#9876aa;font-style:italic;\">INSTANCE</span>.showCalendar()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"userManager\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(loginUser.isNormalUser()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"env\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            } <span style=\"color:#cc7832;\">else if </span>(<span style=\"color:#6a8759;\">\"note\"</span>.equals(tab.getId())) {<br>                <span style=\"color:#cc7832;\">if </span>(!loginUser.isAdmin()) {<br>                    it.remove()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">                </span>}<br>            }<br>        }     <br><br><br><span style=\"color:#808080;\">//        primaryStage.initStyle(StageStyle.UNDECORATED);<br></span><span style=\"color:#808080;\">//        javafx.geometry.Rectangle2D bounds = Screen.getPrimary().getVisualBounds();<br></span><span style=\"color:#808080;\">//        primaryStage.setX(bounds.getMinX());<br></span><span style=\"color:#808080;\">//        primaryStage.setY(bounds.getMinY());<br></span><span style=\"color:#808080;\">//        primaryStage.setWidth(bounds.getWidth());<br></span><span style=\"color:#808080;\">//        primaryStage.setHeight(bounds.getHeight());<br></span><span style=\"color:#808080;\"><br></span><span style=\"color:#808080;\">        </span>primaryStage.initStyle(StageStyle.<span style=\"color:#9876aa;font-style:italic;\">UNIFIED</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>root.getStylesheets().add(<span style=\"color:#6a8759;\">\"/main.css\"</span>)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\"><br></span><span style=\"color:#cc7832;\">        </span>primaryStage.show()<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br><br><br>    <span style=\"color:#cc7832;\">public static void </span><span style=\"color:#ffc66d;\">main</span>(String[] args) {<br>        <span style=\"font-style:italic;\">launch</span>(args)<span style=\"color:#cc7832;\">;<br></span><span style=\"color:#cc7832;\">    </span>}<br>}<br></pre></body></html>","createTime":"2017-08-26 22:53:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":127,"name":"123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">1231123123123123123a &nbsp; a a &nbsp;斯塔大柳塔</font></p></body></html>","createTime":"2017-08-26 23:00:23","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":128,"name":"222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p>a<font face=\"Segoe UI\">斯塔克格勃工工</font></p></body></html>","createTime":"2017-08-26 23:00:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":6,"fileName":"1.doc","savedFileName":null,"noteId":128}]},{"id":129,"name":"12312312322222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">adfasdfsadf1111 &nbsp; &nbsp; adfad asd asdfasd asdf asd as asdfadsf a adasdfa dsaf asdasd fa工</font></p></body></html>","createTime":"2017-08-26 23:00:48","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[{"id":8,"fileName":"未解.docx","savedFileName":"3f042eed-40a5-4bf7-a4af-cd252dd3eed0..docx","noteId":129}]},{"id":130,"name":"123123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">ssdfsdf1212312311111aaaa</font></p></body></html>","createTime":"2017-08-26 23:00:56","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":132,"name":"2222222","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">222222</font></p></body></html>","createTime":"2017-08-29 11:14:39","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":164,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123123</font></p></body></html>","createTime":"2017-08-30 09:25:14","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":165,"name":"aaaaaaa","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">aaaaaaaadfadsf asdf</font></p></body></html>","createTime":"2017-08-30 09:25:27","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]},{"id":167,"name":"123123","directory":false,"parent":125,"childrens":[],"content":"<html dir=\"ltr\"><head></head><body contenteditable=\"true\"><p><font face=\"Segoe UI\">123123</font></p></body></html>","createTime":"2017-09-04 11:02:02","user":{"name":"刘奇","password":"123456","corp":"长沙银行","role":"admin","status":null,"inDate":null,"outDate":null,"id":1},"fileList":[]}] 
